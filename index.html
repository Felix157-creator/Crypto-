<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoPro - Professional Trading Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); color: #fff; min-height: 100vh; overflow-x: hidden; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        @keyframes slideLeft { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 136, 0.3); } 50% { box-shadow: 0 0 40px rgba(0, 255, 136, 0.6); } }
        @keyframes shine { 0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); } 100% { transform: translateX(100%) translateY(100%) rotate(45deg); } }
        
        .layer { display: none; min-height: 100vh; animation: fadeIn 0.5s ease-out; padding-bottom: 80px; }
        .layer.active { display: block; }
        
        .bonus-banner { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); padding: 20px; text-align: center; margin-bottom: 20px; border-radius: 16px; position: relative; overflow: hidden; animation: glow 2s infinite; }
        .bonus-banner::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent); animation: shine 3s infinite; }
        .bonus-banner h2 { font-size: 28px; color: #000; margin-bottom: 8px; font-weight: 900; position: relative; z-index: 1; }
        .bonus-amount { font-size: 48px; font-weight: 900; color: #000; text-shadow: 2px 2px 4px rgba(255,255,255,0.3); margin: 12px 0; }
        
        .winners-ticker { background: rgba(30, 41, 59, 0.95); padding: 16px 0; margin-bottom: 24px; overflow: hidden; border-radius: 12px; border: 2px solid rgba(0, 255, 136, 0.3); }
        .winners-ticker-title { text-align: center; color: #00ff88; font-size: 14px; font-weight: 700; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px; }
        .ticker-content { display: flex; animation: slideLeft 180s linear infinite; white-space: nowrap; }
        .winner-item { display: inline-flex; align-items: center; gap: 12px; padding: 8px 24px; background: rgba(0, 255, 136, 0.1); border-radius: 20px; margin-right: 16px; border: 1px solid rgba(0, 255, 136, 0.2); }
        
        .navbar { background: rgba(30, 41, 59, 0.98); backdrop-filter: blur(10px); padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid rgba(0, 217, 255, 0.2); }
        .logo { display: flex; align-items: center; gap: 12px; font-size: 24px; font-weight: 700; color: #00d9ff; cursor: pointer; }
        .nav-links { display: flex; gap: 20px; align-items: center; }
        .nav-btn { padding: 10px 20px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px; }
        .btn-login { background: transparent; color: #00d9ff; border: 2px solid #00d9ff; }
        .btn-signup { background: linear-gradient(135deg, #00d9ff, #0099cc); color: #fff; border: none; }
        .btn-signup:hover, .btn-login:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0, 217, 255, 0.4); }
        
        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }
        .hero { text-align: center; padding: 60px 20px 40px; background: rgba(30, 41, 59, 0.6); border-radius: 24px; margin-bottom: 30px; border: 1px solid rgba(0, 217, 255, 0.2); }
        .hero h1 { font-size: 42px; margin-bottom: 16px; background: linear-gradient(135deg, #00d9ff, #a855f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .cta-buttons { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
        .btn-large { padding: 16px 32px; font-size: 18px; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s; border: none; }
        .btn-primary { background: linear-gradient(135deg, #00d9ff, #0099cc); color: #fff; }
        .btn-secondary { background: transparent; color: #00d9ff; border: 2px solid #00d9ff; }
        .btn-large:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0, 217, 255, 0.4); }
        
        .stats-grid { display: flex; justify-content: space-around; background: rgba(30, 41, 59, 0.6); border-radius: 16px; padding: 16px; margin-bottom: 24px; flex-wrap: wrap; border: 1px solid rgba(0, 217, 255, 0.2); }
        .stat { text-align: center; margin: 8px; }
        .stat-value { font-size: 24px; font-weight: 700; color: #00d9ff; }
        .stat-label { font-size: 12px; color: rgba(255, 255, 255, 0.7); text-transform: uppercase; }
        
        .card { background: rgba(30, 41, 59, 0.95); border-radius: 24px; padding: 30px; margin-bottom: 24px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4); border: 1px solid rgba(0, 217, 255, 0.2); }
        .section-title { color: #00d9ff; margin-bottom: 16px; font-size: 20px; }
        
        /* PROFESSIONAL CHART STYLES */
        .pro-chart-card { background: rgba(15, 23, 42, 0.9); border-radius: 16px; padding: 20px; margin-bottom: 16px; border: 1px solid rgba(0, 217, 255, 0.2); transition: all 0.3s; }
        .pro-chart-card:hover { border-color: #00d9ff; box-shadow: 0 4px 20px rgba(0, 217, 255, 0.2); }
        
        .chart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); flex-wrap: wrap; gap: 12px; }
        .pair-info { display: flex; align-items: center; gap: 12px; }
        .crypto-icon { width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; }
        
        .price-info { text-align: right; }
        .current-price { font-size: 24px; font-weight: 900; }
        .price-change { font-size: 14px; margin-top: 4px; padding: 4px 8px; border-radius: 6px; font-weight: 600; }
        .positive { color: #00ff88; background: rgba(0, 255, 136, 0.1); }
        .negative { color: #ff006e; background: rgba(255, 0, 110, 0.1); }
        
        .chart-canvas-wrapper { position: relative; height: 300px; margin: 12px 0; }
        .mini-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 12px; }
        .mini-stat { background: rgba(10, 25, 45, 0.5); padding: 8px; border-radius: 8px; text-align: center; }
        .mini-stat-label { font-size: 10px; color: rgba(255, 255, 255, 0.6); margin-bottom: 4px; }
        .mini-stat-value { font-size: 14px; font-weight: 700; color: #00d9ff; }
        
        .trade-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; }
        .quick-trade-btn { padding: 12px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px; }
        .btn-buy { background: linear-gradient(135deg, #00ff88, #00cc6a); color: #000; }
        .btn-sell { background: linear-gradient(135deg, #ff006e, #cc0055); color: #fff; }
        .quick-trade-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
        
        /* AUTH & MODALS */
        .auth-container { max-width: 480px; margin: 80px auto; padding: 40px; background: rgba(30, 41, 59, 0.98); border-radius: 24px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6); border: 1px solid rgba(0, 217, 255, 0.2); }
        .auth-logo { text-align: center; margin-bottom: 32px; }
        .auth-logo-icon { font-size: 60px; margin-bottom: 12px; animation: pulse 2s infinite; }
        .auth-logo-text { font-size: 32px; font-weight: 900; background: linear-gradient(135deg, #00d9ff, #a855f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .auth-title { text-align: center; margin-bottom: 24px; font-size: 24px; color: #00d9ff; }
        
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-size: 14px; font-weight: 600; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 14px 16px; border: 2px solid rgba(0, 217, 255, 0.3); border-radius: 12px; background: rgba(15, 23, 42, 0.8); color: #fff; font-size: 16px; transition: all 0.3s; font-family: inherit; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #00d9ff; box-shadow: 0 0 0 3px rgba(0, 217, 255, 0.1); }
        
        .btn-submit { width: 100%; padding: 16px; border: none; border-radius: 12px; background: linear-gradient(135deg, #00d9ff, #0099cc); color: #fff; font-size: 18px; font-weight: 700; cursor: pointer; transition: all 0.3s; margin-top: 10px; }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0, 217, 255, 0.4); }
        
        .alert { padding: 12px 16px; border-radius: 8px; margin-bottom: 20px; font-size: 14px; display: none; }
        .alert.show { display: block; }
        .alert-success { background: rgba(0, 255, 136, 0.1); border: 1px solid rgba(0, 255, 136, 0.3); color: #00ff88; }
        .alert-error { background: rgba(255, 0, 110, 0.1); border: 1px solid rgba(255, 0, 110, 0.3); color: #ff006e; }
        
        .checkbox-group { display: flex; align-items: center; gap: 8px; margin-bottom: 20px; }
        .checkbox-group input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }
        
        .auth-divider { text-align: center; margin: 24px 0; position: relative; }
        .auth-divider::before { content: ''; position: absolute; left: 0; top: 50%; width: 100%; height: 1px; background: rgba(255, 255, 255, 0.2); }
        .auth-divider span { background: rgba(30, 41, 59, 0.98); padding: 0 12px; position: relative; font-size: 14px; color: rgba(255, 255, 255, 0.6); }
        .auth-link { text-align: center; font-size: 14px; }
        .auth-link a { color: #00d9ff; text-decoration: none; font-weight: 600; cursor: pointer; }
        
        .dashboard-header { background: rgba(30, 41, 59, 0.98); padding: 20px; border-radius: 16px; margin-bottom: 24px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; border: 1px solid rgba(0, 217, 255, 0.2); }
        .user-info { display: flex; align-items: center; gap: 12px; }
        .user-avatar { width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #00d9ff, #a855f7); display: flex; align-items: center; justify-content: center; font-size: 24px; }
        
        .account-toggle { display: flex; gap: 12px; }
        .toggle-btn { padding: 10px 20px; border: 2px solid rgba(0, 217, 255, 0.3); border-radius: 8px; background: transparent; color: rgba(255, 255, 255, 0.7); cursor: pointer; transition: all 0.3s; font-weight: 600; }
        .toggle-btn.active { background: linear-gradient(135deg, #00d9ff, #0099cc); color: #fff; border-color: transparent; }
        
        .balance-display { background: linear-gradient(135deg, #00ff88, #00d9ff); padding: 32px; border-radius: 20px; margin-bottom: 24px; text-align: center; box-shadow: 0 8px 32px rgba(0, 255, 136, 0.3); }
        .balance-amount { font-size: 48px; font-weight: 900; color: #0a1628; margin-bottom: 8px; }
        .balance-label { color: rgba(10, 22, 40, 0.8); font-size: 14px; font-weight: 600; text-transform: uppercase; }
        
        .action-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .action-btn { padding: 20px; border: none; border-radius: 16px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; text-align: center; }
        .action-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); }
        .btn-trade { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #000; }
        .btn-bot { background: linear-gradient(135deg, #a855f7, #7c3aed); color: #fff; }
        .btn-deposit { background: linear-gradient(135deg, #00d9ff, #0099cc); color: #fff; }
        .btn-withdraw { background: linear-gradient(135deg, #ff006e, #cc0055); color: #fff; }
        .btn-logout { background: rgba(255, 255, 255, 0.1); color: #fff; padding: 10px 20px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; cursor: pointer; transition: all 0.3s; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(8px); z-index: 2000; align-items: center; justify-content: center; padding: 20px; overflow-y: auto; }
        .modal.active { display: flex; }
        .modal-content { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border-radius: 24px; padding: 32px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto; border: 1px solid rgba(255, 255, 255, 0.1); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .modal-title { font-size: 24px; color: #00ff88; }
        .close-btn { background: rgba(255, 255, 255, 0.1); border: none; color: white; font-size: 24px; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; transition: all 0.3s; }
        .close-btn:hover { background: rgba(255, 255, 255, 0.2); transform: rotate(90deg); }
        
        .payment-address { background: rgba(0, 255, 136, 0.1); border: 2px solid rgba(0, 255, 136, 0.3); border-radius: 12px; padding: 16px; margin: 16px 0; text-align: center; }
        .payment-address-text { font-size: 16px; font-weight: 700; color: #00ff88; word-break: break-all; font-family: 'Courier New', monospace; background: rgba(0, 0, 0, 0.3); padding: 12px; border-radius: 8px; }
        .copy-btn { background: linear-gradient(135deg, #00d9ff, #0099cc); color: white; border: none; padding: 8px 16px; border-radius: 8px; margin-top: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        
        .warning-box { background: rgba(255, 0, 110, 0.1); border: 2px solid rgba(255, 0, 110, 0.3); border-radius: 12px; padding: 16px; margin: 16px 0; }
        .warning-box strong { color: #ff006e; display: block; margin-bottom: 8px; }
        .info-box { background: rgba(0, 217, 255, 0.1); border: 2px solid rgba(0, 217, 255, 0.3); border-radius: 12px; padding: 16px; margin: 16px 0; }
        .info-box strong { color: #00d9ff; display: block; margin-bottom: 8px; }
        
        .bot-card { background: rgba(15, 23, 42, 0.8); border: 2px solid rgba(100, 200, 255, 0.2); padding: 20px; border-radius: 16px; margin-bottom: 16px; cursor: pointer; transition: all 0.3s; }
        .bot-card:hover { background: rgba(30, 41, 59, 0.9); border-color: #00d9ff; transform: translateY(-2px); }
        .bot-card.selected { background: rgba(0, 255, 136, 0.2); border-color: #00ff88; }
        
        .history-table { width: 100%; border-collapse: collapse; margin-top: 16px; }
        .history-table th { background: rgba(0, 217, 255, 0.1); padding: 12px; text-align: left; font-size: 14px; font-weight: 600; color: #00d9ff; border-bottom: 2px solid rgba(0, 217, 255, 0.3); }
        .history-table td { padding: 12px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); font-size: 14px; }
        .status-badge { padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block; }
        .status-pending { background: rgba(251, 191, 36, 0.2); color: #fbbf24; }
        .status-verified { background: rgba(0, 255, 136, 0.2); color: #00ff88; }
        
        .whatsapp-support { position: fixed; bottom: 20px; left: 20px; z-index: 1000; }
        .whatsapp-btn { display: flex; align-items: center; gap: 12px; background: linear-gradient(135deg, #25D366, #128C7E); color: white; padding: 16px 24px; border-radius: 50px; text-decoration: none; font-weight: 600; box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4); transition: all 0.3s; }
        .whatsapp-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 30px rgba(37, 211, 102, 0.6); }
        
        .payment-method-selector { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 20px; }
        .payment-method-btn { padding: 16px; border: 2px solid rgba(0, 217, 255, 0.3); border-radius: 12px; background: rgba(15, 23, 42, 0.8); color: #fff; cursor: pointer; transition: all 0.3s; text-align: center; font-weight: 600; }
        .payment-method-btn:hover { border-color: #00d9ff; background: rgba(30, 41, 59, 0.9); }
        .payment-method-btn.active { border-color: #00ff88; background: rgba(0, 255, 136, 0.2); }
        
        @media (max-width: 768px) {
            .hero h1 { font-size: 28px; }
            .balance-amount { font-size: 36px; }
            .nav-btn { padding: 8px 16px; font-size: 12px; }
            .chart-canvas-wrapper { height: 250px; }
            .action-grid { grid-template-columns: 1fr; }
            .auth-container { margin: 20px auto; padding: 24px; }
            .whatsapp-btn { padding: 12px 16px; font-size: 14px; }
        }
    </style>
</head>
<body>

<!-- WELCOME LAYER -->
<div id="welcomeLayer" class="layer active">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('welcomeLayer')"><span style="font-size: 28px;">üíé</span><span>CryptoPro</span></div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('loginLayer')">Login</button>
            <button class="nav-btn btn-signup" onclick="showLayer('signupLayer')">Sign Up</button>
        </div>
    </nav>
    <div class="container">
        <div class="bonus-banner">
            <h2>üéâ WELCOME BONUS üéâ</h2>
            <div class="bonus-amount">100% MATCH</div>
            <p style="font-size: 16px; color: rgba(0,0,0,0.8); position: relative; z-index: 1;"><strong>Get 100% bonus on your first deposit!</strong><br>Deposit $100, Get $200 to trade!</p>
        </div>
        <div class="winners-ticker">
            <div class="winners-ticker-title">üèÜ LIVE WINNERS - REAL-TIME PROFITS üèÜ</div>
            <div class="ticker-content" id="winnersTicker"></div>
        </div>
        <div class="hero">
            <h1>Professional Crypto Trading Platform</h1>
            <p style="font-size: 18px; color: rgba(255,255,255,0.9); margin-bottom: 30px; line-height: 1.6;">Join 50,000+ investors earning daily profits through AI-powered trading bots. Over $125M in profits paid to our community!</p>
            <div class="cta-buttons">
                <button class="btn-large btn-primary" onclick="showLayer('signupLayer')">üöÄ Start Trading Now</button>
                <button class="btn-large btn-secondary" onclick="showLayer('loginLayer')">üîê Login to Dashboard</button>
            </div>
        </div>
        <div class="stats-grid">
            <div class="stat"><div class="stat-value">50,123</div><div class="stat-label">Active Traders</div></div>
            <div class="stat"><div class="stat-value">$125.7M</div><div class="stat-label">Total Profits</div></div>
            <div class="stat"><div class="stat-value">10+</div><div class="stat-label">Years Trusted</div></div>
            <div class="stat"><div class="stat-value">98.5%</div><div class="stat-label">Success Rate</div></div>
        </div>
        <div class="card">
            <h2 class="section-title">üìä Live Crypto Markets with Professional Charts</h2>
            <div id="marketsContainer"></div>
        </div>
    </div>
    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank"><span style="font-size: 28px;">üí¨</span><span>WhatsApp Support</span></a>
    </div>
</div>

<!-- SIGNUP LAYER -->
<div id="signupLayer" class="layer">
    <div class="auth-container">
        <div class="auth-logo"><div class="auth-logo-icon">üíé</div><div class="auth-logo-text">CryptoPro</div></div>
        <h2 class="auth-title">Create Your Account</h2>
        <div id="signupAlert" class="alert"></div>
        <form id="signupForm" onsubmit="handleSignup(); return false;">
            <div class="form-group"><label>Full Name</label><input type="text" id="signupName" placeholder="Enter your full name" required></div>
            <div class="form-group"><label>Email Address</label><input type="email" id="signupEmail" placeholder="your@email.com" required></div>
            <div class="form-group"><label>Phone Number</label><input type="tel" id="signupPhone" placeholder="+254 712 345 678" required></div>
            <div class="form-group"><label>Password</label><input type="password" id="signupPassword" placeholder="Create strong password" required></div>
            <div class="form-group"><label>Confirm Password</label><input type="password" id="signupConfirm" placeholder="Re-enter password" required></div>
            <div class="checkbox-group"><input type="checkbox" id="signupTerms" required><label for="signupTerms">I agree to Terms & Conditions</label></div>
            <button type="submit" class="btn-submit">üöÄ Create Account</button>
        </form>
        <div class="auth-divider"><span>Already have an account?</span></div>
        <div class="auth-link"><a onclick="showLayer('loginLayer')">Login Here</a></div>
    </div>
    <div class="whatsapp-support"><a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank"><span style="font-size: 28px;">üí¨</span><span>Support</span></a></div>
</div>

<!-- LOGIN LAYER -->
<div id="loginLayer" class="layer">
    <div class="auth-container">
        <div class="auth-logo"><div class="auth-logo-icon">üíé</div><div class="auth-logo-text">CryptoPro</div></div>
        <h2 class="auth-title">Welcome Back</h2>
        <div id="loginAlert" class="alert"></div>
        <form id="loginForm" onsubmit="handleLogin(); return false;">
            <div class="form-group"><label>Email Address</label><input type="email" id="loginEmail" placeholder="your@email.com" required></div>
            <div class="form-group"><label>Password</label><input type="password" id="loginPassword" placeholder="Enter your password" required></div>
            <div class="checkbox-group"><input type="checkbox" id="loginRemember"><label for="loginRemember">Remember me</label></div>
            <button type="submit" class="btn-submit">üîê Login</button>
        </form>
        <div class="auth-divider"><span>Don't have an account?</span></div>
        <div class="auth-link"><a onclick="showLayer('signupLayer')">Create Account</a></div>
        <div class="auth-link" style="margin-top: 20px;"><a onclick="showLayer('welcomeLayer')" style="color: rgba(255,255,255,0.6);">‚Üê Back to Home</a></div>
    </div>
    <div class="whatsapp-support"><a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank"><span style="font-size: 28px;">üí¨</span><span>Support</span></a></div>
</div>

<!-- DASHBOARD LAYER -->
<div id="dashboardLayer" class="layer">
    <nav class="navbar">
        <div class="logo"><span style="font-size: 28px;">üíé</span><span>CryptoPro</span></div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('portfolioLayer')" style="background: transparent; color: #00d9ff; border: 1px solid rgba(0,217,255,0.3);">üìä Portfolio</button>
            <button class="btn-logout" onclick="handleLogout()">Logout</button>
        </div>
    </nav>
    <div class="container">
        <div class="dashboard-header">
            <div class="user-info">
                <div class="user-avatar">üë§</div>
                <div><div style="font-size: 16px; font-weight: 600;" id="userName">User</div><div style="font-size: 12px; opacity: 0.7;" id="userEmail">email@example.com</div></div>
            </div>
            <div class="account-toggle">
                <button class="toggle-btn" id="demoBtn" onclick="switchAccount('demo')">üéÆ DEMO</button>
                <button class="toggle-btn active" id="realBtn" onclick="switchAccount('real')">üí∞ REAL</button>
            </div>
        </div>
        <div class="balance-display">
            <div class="balance-label">TOTAL PORTFOLIO VALUE</div>
            <div class="balance-amount" id="dashBalance">$0.00</div>
        </div>
        <div class="action-grid">
            <button class="action-btn btn-trade" onclick="showModal('tradeModal')">‚ö° TRADE NOW</button>
            <button class="action-btn btn-bot" onclick="showModal('botModal')">ü§ñ TRADING BOT</button>
            <button class="action-btn btn-deposit" onclick="showModal('depositModal')">üí∞ DEPOSIT</button>
            <button class="action-btn btn-withdraw" onclick="showModal('withdrawModal')">üí∏ WITHDRAW</button>
        </div>
        <div class="card">
            <h2 class="section-title">üìä Professional Trading Charts</h2>
            <div id="dashMarkets"></div>
        </div>
    </div>
    <div class="whatsapp-support"><a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank"><span style="font-size: 28px;">üí¨</span><span>Support</span></a></div>
</div>

<!-- PORTFOLIO LAYER -->
<div id="portfolioLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')"><span style="font-size: 28px;">üíé</span><span>CryptoPro</span></div>
        <button class="btn-logout" onclick="showLayer('dashboardLayer')">‚Üê Back to Dashboard</button>
    </nav>
    <div class="container">
        <div class="card">
            <h2 class="section-title">üìä Portfolio Overview</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                <div style="background: rgba(0,255,136,0.1); padding: 20px; border-radius: 12px; border: 1px solid rgba(0,255,136,0.3);"><div style="font-size: 14px; opacity: 0.8; margin-bottom: 8px;">Total Deposited</div><div style="font-size: 24px; font-weight: 700; color: #00ff88;" id="portfolioDeposited">$0.00</div></div>
                <div style="background: rgba(0,217,255,0.1); padding: 20px; border-radius: 12px; border: 1px solid rgba(0,217,255,0.3);"><div style="font-size: 14px; opacity: 0.8; margin-bottom: 8px;">Current Balance</div><div style="font-size: 24px; font-weight: 700; color: #00d9ff;" id="portfolioBalance">$0.00</div></div>
                <div style="background: rgba(251,191,36,0.1); padding: 20px; border-radius: 12px; border: 1px solid rgba(251,191,36,0.3);"><div style="font-size: 14px; opacity: 0.8; margin-bottom: 8px;">Total Profit</div><div style="font-size: 24px; font-weight: 700; color: #fbbf24;" id="portfolioProfit">$0.00</div></div>
            </div>
        </div>
        <div class="card">
            <h3 style="color: #00d9ff; margin-bottom: 16px;">üìù Transaction History</h3>
            <div style="overflow-x: auto;"><table class="history-table"><thead><tr><th>Type</th><th>Amount</th><th>Status</th><th>Date</th></tr></thead><tbody id="historyTableBody"><tr><td colspan="4" style="text-align: center; padding: 40px; opacity: 0.5;">No transactions yet</td></tr></tbody></table></div>
        </div>
    </div>
    <div class="whatsapp-support"><a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank"><span style="font-size: 28px;">üí¨</span><span>Support</span></a></div>
</div>

<!-- MODALS -->
<div id="depositModal" class="modal">
    <div class="modal-content">
        <div class="modal-header"><h2 class="modal-title">üí∞ Deposit Funds</h2><button class="close-btn" onclick="closeModal('depositModal')">√ó</button></div>
        <div style="background: rgba(251, 191, 36, 0.1); border: 2px solid rgba(251, 191, 36, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px; text-align: center;"><div style="font-size: 24px; font-weight: 900; color: #fbbf24; margin-bottom: 8px;">üéâ 100% WELCOME BONUS!</div><div style="font-size: 14px; color: rgba(255, 255, 255, 0.9);">First deposit gets 100% match! Deposit $100, get $200 to trade!</div></div>
        <div class="form-group"><label>Amount (USD)</label><input type="number" id="depositAmount" min="10" placeholder="Minimum $10" required></div>
        <div class="form-group"><label>Select Payment Method</label><div class="payment-method-selector"><button type="button" class="payment-method-btn" onclick="selectPaymentMethod('mpesa')">üì± M-Pesa</button><button type="button" class="payment-method-btn" onclick="selectPaymentMethod('crypto')">ü™ô Crypto</button><button type="button" class="payment-method-btn" onclick="selectPaymentMethod('bank')">üè¶ Bank</button></div></div>
        <div id="mpesaDetails" class="payment-address" style="display: none;"><div style="font-size: 14px; margin-bottom: 8px; color: #00ff88;">üì± M-PESA TILL NUMBER</div><div class="payment-address-text">1500448</div><button class="copy-btn" onclick="copyToClipboard('1500448', 'M-Pesa Till Number')">üìã Copy Till Number</button></div>
        <div id="cryptoDetails" class="payment-address" style="display: none;"><div style="font-size: 14px; margin-bottom: 8px; color: #00ff88;">ü™ô BINANCE USDT (TRC-20)</div><div class="payment-address-text">TK4rUz6TUEd7zCWeuiX5R47pSNdPswJnAc</div><button class="copy-btn" onclick="copyToClipboard('TK4rUz6TUEd7zCWeuiX5R47pSNdPswJnAc', 'Crypto Address')">üìã Copy Address</button></div>
        <div id="bankDetails" class="payment-address" style="display: none;"><div style="font-size: 14px; margin-bottom: 12px; color: #00ff88;">üè¶ BANK TRANSFER DETAILS</div><div style="text-align: left; background: rgba(0,0,0,0.3); padding: 16px; border-radius: 8px; margin-bottom: 12px;"><div style="margin-bottom: 8px;"><strong>Bank:</strong> Equity Bank</div><div style="margin-bottom: 8px;"><strong>Account Name:</strong> Felix Kiprotich Koskei</div><div style="margin-bottom: 8px;"><strong>Account Number:</strong> <span style="color: #00ff88;">0310184912409</span></div><div><strong>Branch:</strong> Any Equity Bank Branch</div></div><button class="copy-btn" onclick="copyToClipboard('0310184912409', 'Account Number')">üìã Copy Account Number</button></div>
        <div class="warning-box"><strong>‚ö†Ô∏è IMPORTANT - READ CAREFULLY:</strong><div style="font-size: 13px; line-height: 1.6;">‚Ä¢ Complete your payment FIRST before clicking "Confirm"<br>‚Ä¢ Funds appear ONLY after payment verification (1-10 mins)<br>‚Ä¢ Clicking without paying will NOT credit your account</div></div>
        <div class="form-group"><label>Transaction Reference (Required)</label><input type="text" id="depositRef" placeholder="Enter your transaction ID/reference" required></div>
        <button class="btn-submit" onclick="processDeposit()">‚ö° CONFIRM DEPOSIT</button>
    </div>
</div>

<div id="withdrawModal" class="modal">
    <div class="modal-content">
        <div class="modal-header"><h2 class="modal-title">üí∏ Withdraw Funds</h2><button class="close-btn" onclick="closeModal('withdrawModal')">√ó</button></div>
        <div class="form-group"><label>Amount (USD)</label><input type="number" id="withdrawAmount" min="10" placeholder="Minimum $10"></div>
        <div class="form-group"><label>Withdrawal Method</label><select id="withdrawMethod"><option>üè¶ Bank Transfer</option><option>ü™ô Crypto</option><option>üì± M-Pesa</option></select></div>
        <div class="form-group"><label>Account Details</label><input type="text" id="withdrawAccount" placeholder="Enter account details"></div>
        <button class="btn-submit" onclick="processWithdraw()">üí∏ REQUEST WITHDRAWAL</button>
    </div>
</div>

<div id="tradeModal" class="modal">
    <div class="modal-content">
        <div class="modal-header"><h2 class="modal-title">üìä Execute Trade</h2><button class="close-btn" onclick="closeModal('tradeModal')">√ó</button></div>
        <div class="form-group"><label>Trading Pair</label><select id="tradePair"><option>BTC/USDT</option><option>ETH/USDT</option><option>BNB/USDT</option><option>SOL/USDT</option><option>XRP/USDT</option><option>ADA/USDT</option></select></div>
        <div class="form-group"><label>Trade Type</label><select id="tradeType"><option>üü¢ BUY (Long)</option><option>üî¥ SELL (Short)</option></select></div>
        <div class="form-group"><label>Amount (USD)</label><input type="number" id="tradeAmount" min="10" placeholder="Minimum $10"></div>
        <button class="btn-submit" onclick="executeTrade()">‚ö° EXECUTE TRADE</button>
    </div>
</div>

<div id="botModal" class="modal">
    <div class="modal-content">
        <div class="modal-header"><h2 class="modal-title">ü§ñ AI Trading Bots</h2><button class="close-btn" onclick="closeModal('botModal')">√ó</button></div>
        <div id="botCards">
            <div class="bot-card" onclick="selectBot(this, 'conservative')"><div style="display: flex; gap: 16px; align-items: center;"><div style="font-size: 36px;">üõ°Ô∏è</div><div style="flex: 1;"><div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">Conservative Bot</div><div style="font-size: 13px; opacity: 0.7;">65% win rate ‚Ä¢ $3-15 per trade</div><div style="font-size: 12px; color: #00ff88; margin-top: 4px;">‚úì Low Risk ‚Ä¢ Steady Growth</div></div></div></div>
            <div class="bot-card" onclick="selectBot(this, 'balanced')"><div style="display: flex; gap: 16px; align-items: center;"><div style="font-size: 36px;">‚öñÔ∏è</div><div style="flex: 1;"><div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">Balanced Bot</div><div style="font-size: 13px; opacity: 0.7;">75% win rate ‚Ä¢ $10-35 per trade</div><div style="font-size: 12px; color: #00d9ff; margin-top: 4px;">‚úì Moderate Risk ‚Ä¢ Best Value</div></div></div></div>
            <div class="bot-card" onclick="selectBot(this, 'aggressive')"><div style="display: flex; gap: 16px; align-items: center;"><div style="font-size: 36px;">üöÄ</div><div style="flex: 1;"><div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">Aggressive Bot</div><div style="font-size: 13px; opacity: 0.7;">85% win rate ‚Ä¢ $20-80 per trade</div><div style="font-size: 12px; color: #fbbf24; margin-top: 4px;">‚úì High Risk ‚Ä¢ Maximum Profits</div></div></div></div>
            <div class="bot-card" onclick="selectBot(this, 'expert')"><div style="display: flex; gap: 16px; align-items: center;"><div style="font-size: 36px;">ü§ñ</div><div style="flex: 1;"><div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">Expert AI Bot</div><div style="font-size: 13px; opacity: 0.7;">90% win rate ‚Ä¢ $30-120 per trade</div><div style="font-size: 12px; color: #a855f7; margin-top: 4px;">‚úì AI-Powered ‚Ä¢ Premium Strategy</div></div></div></div>
        </div>
        <button class="btn-submit" onclick="activateBot()" style="margin-top: 20px;">‚úÖ ACTIVATE BOT</button>
    </div>
</div>

<script>
var CONFIG={MIN_DEPOSIT:10,MIN_WITHDRAW:10,MIN_WITHDRAW_TOTAL_DEPOSITS:500,WELCOME_BONUS:1,PAYMENT_VERIFICATION_TIME:12e4,BOT_TRADE_INTERVAL:15e3,PRICE_UPDATE_INTERVAL:3e3};
var currentUser=null,currentUserEmail='',activeAccount='real',selectedBotType=null,selectedPaymentMethod=null,robotTrades=[],botInterval=null,priceUpdateInterval=null;
var cryptoCharts={};
var cryptoData={'BTC/USDT':{price:70218.09,change:6.59,color:'#f7931a',icon:'‚Çø'},'ETH/USDT':{price:2050.35,change:5.99,color:'#627eea',icon:'Œû'},'BNB/USDT':{price:654.84,change:1.42,color:'#f3ba2f',icon:'üî∂'},'SOL/USDT':{price:86.54,change:5.49,color:'#14f195',icon:'‚óé'},'XRP/USDT':{price:1.4419,change:17.69,color:'#23292f',icon:'‚óÜ'},'ADA/USDT':{price:0.2766,change:8.73,color:'#0033ad',icon:'‚Ç≥'}};
var winnerNames=['James M.','Sarah K.','Michael R.','Emily T.','David L.','Jessica P.','Robert H.','Amanda W.','Christopher B.','Jennifer S.','Daniel C.','Ashley D.','Matthew F.','Lisa G.','Andrew N.','Michelle V.','Joshua X.','Elizabeth Y.','Kevin Z.','Patricia Q.','Brian J.','Linda U.','Steven I.','Barbara O.','Richard A.','Susan E.','Thomas W.','Karen M.','Joseph R.','Nancy T.'];

function showAlert(id,msg,type){var a=document.getElementById(id);if(!a)return;a.textContent=msg;a.className='alert alert-'+type+' show';if(type==='error')setTimeout(function(){a.classList.remove('show')},5e3);}
function saveUser(){if(!currentUserEmail||!currentUser)return;var u=JSON.parse(localStorage.getItem('cryptoProUsers')||'{}');u[currentUserEmail]=currentUser;localStorage.setItem('cryptoProUsers',JSON.stringify(u));}
function showModal(id){document.getElementById(id).classList.add('active');}
function closeModal(id){document.getElementById(id).classList.remove('active');}
function showLayer(layerId){var l=document.querySelectorAll('.layer');for(var i=0;i<l.length;i++)l[i].classList.remove('active');document.getElementById(layerId).classList.add('active');if(layerId==='dashboardLayer'){updateDashboard();startLiveUpdates();}else if(layerId==='portfolioLayer')updatePortfolio();}

function selectPaymentMethod(method){selectedPaymentMethod=method;var btns=document.querySelectorAll('.payment-method-btn');btns.forEach(function(btn){btn.classList.remove('active');});event.target.classList.add('active');document.getElementById('mpesaDetails').style.display='none';document.getElementById('cryptoDetails').style.display='none';document.getElementById('bankDetails').style.display='none';if(method==='mpesa')document.getElementById('mpesaDetails').style.display='block';else if(method==='crypto')document.getElementById('cryptoDetails').style.display='block';else if(method==='bank')document.getElementById('bankDetails').style.display='block';}
function copyToClipboard(text,label){if(navigator.clipboard){navigator.clipboard.writeText(text).then(function(){alert('‚úÖ '+label+' copied!\n\n'+text);}).catch(function(){alert('üìã '+label+':\n\n'+text);});}else{alert('üìã '+label+':\n\n'+text);}}

function generateWinnersTicker(){var t=document.getElementById('winnersTicker');if(!t)return;var html='';for(var i=0;i<100;i++){var name=winnerNames[Math.floor(Math.random()*winnerNames.length)];var amount=(Math.random()*500+50).toFixed(2);var pairs=Object.keys(cryptoData);var pair=pairs[Math.floor(Math.random()*pairs.length)];html+='<div class="winner-item"><span style="font-size:20px;">üéâ</span><span style="font-weight:600;color:#fff;">'+name+'</span><span>won</span><span style="color:#00ff88;font-weight:700;">+$'+amount+'</span><span>on '+pair+'</span></div>';}t.innerHTML=html+html;}

function handleSignup(){var name=document.getElementById('signupName').value.trim();var email=document.getElementById('signupEmail').value.trim().toLowerCase();var phone=document.getElementById('signupPhone').value.trim();var password=document.getElementById('signupPassword').value;var confirm=document.getElementById('signupConfirm').value;var terms=document.getElementById('signupTerms').checked;if(!name||!email||!phone||!password){showAlert('signupAlert','Please fill in all fields','error');return;}if(password.length<6){showAlert('signupAlert','Password must be at least 6 characters','error');return;}if(password!==confirm){showAlert('signupAlert','Passwords do not match','error');return;}if(!terms){showAlert('signupAlert','Please accept Terms & Conditions','error');return;}var users=JSON.parse(localStorage.getItem('cryptoProUsers')||'{}');if(users[email]){showAlert('signupAlert','Email already registered. Please login.','error');return;}users[email]={name:name,email:email,phone:phone,password:password,demoBalance:10000,realBalance:0,displayBalance:0,totalDeposited:0,robotTrades:[],totalRobotProfits:0,selectedBot:'none',receivedWelcomeBonus:false,pendingDeposits:[],transactions:[],createdAt:new Date().toISOString()};localStorage.setItem('cryptoProUsers',JSON.stringify(users));showAlert('signupAlert','‚úÖ Account created! Redirecting...','success');setTimeout(function(){document.getElementById('signupForm').reset();showLayer('loginLayer');},2e3);}

function handleLogin(){var email=document.getElementById('loginEmail').value.trim().toLowerCase();var password=document.getElementById('loginPassword').value;if(!email||!password){showAlert('loginAlert','Please enter email and password','error');return;}var users=JSON.parse(localStorage.getItem('cryptoProUsers')||'{}');if(!users[email]){showAlert('loginAlert','Account not found. Please sign up.','error');return;}if(users[email].password!==password){showAlert('loginAlert','Incorrect password','error');return;}currentUser=users[email];currentUserEmail=email;robotTrades=currentUser.robotTrades||[];sessionStorage.setItem('loggedIn','true');sessionStorage.setItem('currentEmail',email);showAlert('loginAlert','‚úÖ Login successful! Redirecting...','success');setTimeout(function(){document.getElementById('loginForm').reset();showLayer('dashboardLayer');checkPendingDeposits();if(currentUser.selectedBot!=='none')startBotTrading();},1500);}

function handleLogout(){if(confirm('Logout?')){if(botInterval)clearInterval(botInterval);sessionStorage.clear();currentUser=null;currentUserEmail='';robotTrades=[];showLayer('welcomeLayer');}}

function updateDashboard(){if(!currentUser)return;document.getElementById('userName').textContent=currentUser.name;document.getElementById('userEmail').textContent=currentUser.email;var balance=activeAccount==='demo'?currentUser.demoBalance:currentUser.displayBalance;document.getElementById('dashBalance').textContent='$'+balance.toFixed(2);renderProfessionalCharts();}

function switchAccount(type){activeAccount=type;document.getElementById('demoBtn').classList.toggle('active',type==='demo');document.getElementById('realBtn').classList.toggle('active',type==='real');updateDashboard();}

function processDeposit(){if(!selectedPaymentMethod){alert('‚ùå Please select a payment method first!');return;}var amount=parseFloat(document.getElementById('depositAmount').value);var ref=document.getElementById('depositRef').value.trim();if(!amount||amount<CONFIG.MIN_DEPOSIT){alert('‚ùå Minimum deposit: $'+CONFIG.MIN_DEPOSIT);return;}if(!ref){alert('‚ùå Transaction reference is required!');return;}var paymentInfo='';if(selectedPaymentMethod==='mpesa')paymentInfo='M-Pesa Till: 1500448';else if(selectedPaymentMethod==='crypto')paymentInfo='Crypto: TK4rUz6TUEd7zCWeuiX5R47pSNdPswJnAc';else if(selectedPaymentMethod==='bank')paymentInfo='Bank: 0310184912409';if(!confirm('‚ö†Ô∏è CONFIRM PAYMENT\n\nHave you sent $'+amount.toFixed(2)+' to:\n'+paymentInfo+'\n\nClick OK only if you have paid!'))return;var deposit={id:'DEP-'+Date.now(),amount:amount,reference:ref,paymentMethod:selectedPaymentMethod,timestamp:new Date().toISOString(),status:'pending',type:'deposit'};if(!currentUser.pendingDeposits)currentUser.pendingDeposits=[];if(!currentUser.transactions)currentUser.transactions=[];currentUser.pendingDeposits.push(deposit);currentUser.transactions.push(deposit);saveUser();closeModal('depositModal');alert('‚úÖ DEPOSIT SUBMITTED!\n\nAmount: $'+amount.toFixed(2)+'\nPayment: '+paymentInfo+'\nReference: '+ref+'\n\nYour funds will appear after verification (1-10 minutes).');setTimeout(function(){verifyDeposit(deposit.id);},CONFIG.PAYMENT_VERIFICATION_TIME);}

function checkPendingDeposits(){if(!currentUser||!currentUser.pendingDeposits)return;currentUser.pendingDeposits.forEach(function(deposit){if(deposit.status==='pending'){var timePassed=Date.now()-new Date(deposit.timestamp).getTime();if(timePassed>=CONFIG.PAYMENT_VERIFICATION_TIME)verifyDeposit(deposit.id);}});}

function verifyDeposit(depositId){var deposit=currentUser.pendingDeposits.find(function(d){return d.id===depositId;});if(!deposit||deposit.status!=='pending')return;var bonusAmount=0;if(!currentUser.receivedWelcomeBonus){bonusAmount=deposit.amount*CONFIG.WELCOME_BONUS;currentUser.receivedWelcomeBonus=true;}var totalAmount=deposit.amount+bonusAmount;currentUser.displayBalance+=totalAmount;currentUser.realBalance+=totalAmount;currentUser.totalDeposited+=deposit.amount;deposit.status='verified';var transaction=currentUser.transactions.find(function(t){return t.id===depositId;});if(transaction)transaction.status='verified';saveUser();updateDashboard();if(sessionStorage.getItem('loggedIn'))alert(bonusAmount>0?'üéâ DEPOSIT VERIFIED!\n\nDeposit: $'+deposit.amount.toFixed(2)+'\nüéÅ Bonus: +$'+bonusAmount.toFixed(2)+'\nüí∞ Total: $'+totalAmount.toFixed(2):'‚úÖ DEPOSIT VERIFIED!\n\nAmount: $'+deposit.amount.toFixed(2));}

function processWithdraw(){var amount=parseFloat(document.getElementById('withdrawAmount').value);var account=document.getElementById('withdrawAccount').value.trim();if(!amount||amount<CONFIG.MIN_WITHDRAW){alert('Minimum withdrawal: $'+CONFIG.MIN_WITHDRAW);return;}var balance=activeAccount==='demo'?currentUser.demoBalance:currentUser.displayBalance;if(amount>balance){alert('Insufficient balance\n\nAvailable: $'+balance.toFixed(2));return;}if(currentUser.totalDeposited<CONFIG.MIN_WITHDRAW_TOTAL_DEPOSITS){var needed=CONFIG.MIN_WITHDRAW_TOTAL_DEPOSITS-currentUser.totalDeposited;alert('‚ö†Ô∏è Need $'+needed.toFixed(2)+' more in deposits to unlock withdrawals.');return;}if(!account){alert('Enter account details');return;}if(activeAccount==='demo')currentUser.demoBalance-=amount;else currentUser.displayBalance-=amount;saveUser();updateDashboard();closeModal('withdrawModal');alert('‚úÖ Withdrawal request submitted!\n\nAmount: $'+amount.toFixed(2)+'\n\nProcessing: 1-24 hours');}

function executeTrade(){var amount=parseFloat(document.getElementById('tradeAmount').value);var pair=document.getElementById('tradePair').value;if(!amount||amount<10){alert('Minimum trade: $10');return;}var balance=activeAccount==='demo'?currentUser.demoBalance:currentUser.displayBalance;if(amount>balance){alert('Insufficient balance');return;}var win=Math.random()<0.6;var profit=amount*(Math.random()*0.05)*(win?1:-1);if(activeAccount==='demo')currentUser.demoBalance+=profit;else currentUser.displayBalance+=profit;saveUser();updateDashboard();closeModal('tradeModal');alert((win?'‚úÖ Trade Won!':'‚ùå Trade Lost')+'\n\nPair: '+pair+'\nP/L: '+(profit>=0?'+':'')+'$'+profit.toFixed(2));}

function selectBot(element,type){selectedBotType=type;var cards=document.querySelectorAll('.bot-card');for(var i=0;i<cards.length;i++)cards[i].classList.remove('selected');element.classList.add('selected');}

function activateBot(){if(!selectedBotType){alert('Select a bot first');return;}currentUser.selectedBot=selectedBotType;saveUser();closeModal('botModal');alert('‚úÖ Bot activated! Check Portfolio page for live activity.');startBotTrading();}

function startBotTrading(){if(botInterval)clearInterval(botInterval);botInterval=setInterval(function(){if(!currentUser||currentUser.selectedBot==='none'||activeAccount!=='real')return;var bots={conservative:{min:3,max:15,rate:0.65},balanced:{min:10,max:35,rate:0.75},aggressive:{min:20,max:80,rate:0.85},expert:{min:30,max:120,rate:0.90}};var bot=bots[currentUser.selectedBot];var win=Math.random()<bot.rate;var profit=win?(bot.min+Math.random()*(bot.max-bot.min)):-(bot.min*0.3);currentUser.displayBalance+=profit;currentUser.totalRobotProfits+=profit;var pairs=Object.keys(cryptoData);var pair=pairs[Math.floor(Math.random()*pairs.length)];robotTrades.unshift({pair:pair,profit:profit,time:new Date().toISOString(),botType:currentUser.selectedBot,status:win?'won':'lost'});if(robotTrades.length>50)robotTrades=robotTrades.slice(0,50);currentUser.robotTrades=robotTrades;if(!currentUser.transactions)currentUser.transactions=[];currentUser.transactions.push({id:'BOT-'+Date.now(),type:'bot_trade',pair:pair,profit:profit,timestamp:new Date().toISOString(),status:win?'won':'lost'});saveUser();updateDashboard();},CONFIG.BOT_TRADE_INTERVAL);}

function updatePortfolio(){if(!currentUser)return;document.getElementById('portfolioDeposited').textContent='$'+(currentUser.totalDeposited||0).toFixed(2);document.getElementById('portfolioBalance').textContent='$'+(currentUser.displayBalance||0).toFixed(2);var profit=(currentUser.displayBalance||0)-(currentUser.totalDeposited||0);var profitEl=document.getElementById('portfolioProfit');profitEl.textContent=(profit>=0?'+':'')+'$'+profit.toFixed(2);profitEl.style.color=profit>=0?'#fbbf24':'#ff006e';var tbody=document.getElementById('historyTableBody');var transactions=currentUser.transactions||[];if(transactions.length===0){tbody.innerHTML='<tr><td colspan="4" style="text-align: center; padding: 40px; opacity: 0.5;">No transactions yet</td></tr>';}else{var html='';for(var i=transactions.length-1;i>=Math.max(0,transactions.length-20);i--){var t=transactions[i];var statusClass=t.status==='verified'||t.status==='won'?'status-verified':'status-pending';var amount=t.type==='withdrawal'?'-$'+t.amount.toFixed(2):t.profit!==undefined?(t.profit>=0?'+':'')+'$'+t.profit.toFixed(2):'+$'+t.amount.toFixed(2);var typeLabel=t.type==='deposit'?'üí∞ Deposit':t.type==='withdrawal'?'üí∏ Withdrawal':t.type==='bot_trade'?'ü§ñ Bot':'üìä Trade';html+='<tr><td>'+typeLabel+'</td><td style="font-weight: 700; color: '+(amount.startsWith('+')?'#00ff88':'#ff006e')+';">'+amount+'</td><td><span class="status-badge '+statusClass+'">'+t.status+'</span></td><td style="font-size: 12px;">'+new Date(t.timestamp).toLocaleString()+'</td></tr>';}tbody.innerHTML=html;}}

function generatePriceData(pair,points=50){var data=[];var price=cryptoData[pair].price;var now=Date.now();for(var i=points-1;i>=0;i--){var volatility=price*0.015;price+=(Math.random()-0.5)*volatility;data.push({time:now-(i*60000),price:price,volume:Math.floor(Math.random()*10000000)+5000000});}return data;}

function renderProfessionalCharts(){var container=document.getElementById('dashMarkets');if(!container)return;var html='';for(var pair in cryptoData){var data=cryptoData[pair];var change=data.change.toFixed(2);var chartId='chart-'+pair.replace('/','');html+='<div class="pro-chart-card">';html+='<div class="chart-header">';html+='<div class="pair-info"><div class="crypto-icon" style="background: '+data.color+';">'+data.icon+'</div><div><div style="font-weight: 700; font-size: 18px;">'+pair+'</div><div style="font-size: 12px; opacity: 0.7;">24h Volume: $'+(Math.random()*1000+500).toFixed(0)+'M</div></div></div>';html+='<div class="price-info"><div class="current-price" style="color: '+data.color+';">$'+data.price.toFixed(data.price<1?4:2)+'</div><div class="price-change '+(change>0?'positive':'negative')+'">'+(change>0?'+':'')+change+'%</div></div>';html+='</div>';html+='<div class="chart-canvas-wrapper"><canvas id="'+chartId+'"></canvas></div>';html+='<div class="mini-stats">';html+='<div class="mini-stat"><div class="mini-stat-label">High</div><div class="mini-stat-value">$'+(data.price*1.02).toFixed(2)+'</div></div>';html+='<div class="mini-stat"><div class="mini-stat-label">Low</div><div class="mini-stat-value">$'+(data.price*0.98).toFixed(2)+'</div></div>';html+='<div class="mini-stat"><div class="mini-stat-label">Vol</div><div class="mini-stat-value">'+(Math.random()*500+100).toFixed(0)+'M</div></div>';html+='<div class="mini-stat"><div class="mini-stat-label">MA(20)</div><div class="mini-stat-value">$'+(data.price*0.99).toFixed(2)+'</div></div>';html+='</div>';html+='<div class="trade-actions"><button class="quick-trade-btn btn-buy" onclick="quickTrade(\''+pair+'\',\'buy\')">üü¢ BUY</button><button class="quick-trade-btn btn-sell" onclick="quickTrade(\''+pair+'\',\'sell\')">üî¥ SELL</button></div>';html+='</div>';}container.innerHTML=html;setTimeout(function(){createCharts();},100);}

function createCharts(){for(var pair in cryptoData){var chartId='chart-'+pair.replace('/','');var canvas=document.getElementById(chartId);if(!canvas)continue;var ctx=canvas.getContext('2d');var priceData=generatePriceData(pair);var times=priceData.map(function(d){return d.time;});var prices=priceData.map(function(d){return d.price;});if(cryptoCharts[pair])cryptoCharts[pair].destroy();cryptoCharts[pair]=new Chart(ctx,{type:'line',data:{labels:times,datasets:[{label:'Price',data:prices,borderColor:cryptoData[pair].color,backgroundColor:'rgba('+parseInt(cryptoData[pair].color.slice(1,3),16)+','+parseInt(cryptoData[pair].color.slice(3,5),16)+','+parseInt(cryptoData[pair].color.slice(5,7),16)+',0.1)',borderWidth:2,fill:true,tension:0.4,pointRadius:0,pointHoverRadius:4}]},options:{responsive:true,maintainAspectRatio:false,interaction:{intersect:false,mode:'index'},plugins:{legend:{display:false},tooltip:{backgroundColor:'rgba(10,25,45,0.95)',titleColor:'#00d9ff',bodyColor:'#fff',borderColor:'rgba(0,217,255,0.5)',borderWidth:1,padding:10,callbacks:{label:function(context){return'Price: $'+context.parsed.y.toFixed(2);}}}},scales:{x:{grid:{color:'rgba(255,255,255,0.05)',drawBorder:false},ticks:{color:'rgba(255,255,255,0.6)',maxRotation:0,autoSkip:true,maxTicksLimit:6,callback:function(value,index){var date=new Date(this.getLabelForValue(value));return date.getHours()+':'+String(date.getMinutes()).padStart(2,'0');}}},y:{position:'right',grid:{color:'rgba(255,255,255,0.05)',drawBorder:false},ticks:{color:'rgba(255,255,255,0.6)',callback:function(value){return'$'+value.toFixed(0);}}}}}});}}

function renderSimpleMarkets(){var container=document.getElementById('marketsContainer');if(!container)return;var html='';for(var pair in cryptoData){var data=cryptoData[pair];var change=data.change.toFixed(2);html+='<div class="pro-chart-card" style="margin-bottom: 16px;">';html+='<div class="chart-header">';html+='<div class="pair-info"><div class="crypto-icon" style="background: '+data.color+';">'+data.icon+'</div><div><div style="font-weight: 700; font-size: 18px;">'+pair+'</div></div></div>';html+='<div class="price-info"><div class="current-price" style="color: '+data.color+';">$'+data.price.toFixed(data.price<1?4:2)+'</div><div class="price-change '+(change>0?'positive':'negative')+'">'+(change>0?'+':'')+change+'%</div></div>';html+='</div></div>';}container.innerHTML=html;}

function quickTrade(pair,type){document.getElementById('tradePair').value=pair;document.getElementById('tradeType').value=type==='buy'?'üü¢ BUY (Long)':'üî¥ SELL (Short)';showModal('tradeModal');}

function startLiveUpdates(){if(priceUpdateInterval)clearInterval(priceUpdateInterval);priceUpdateInterval=setInterval(function(){for(var pair in cryptoData){var changePercent=(Math.random()-0.5)*2;cryptoData[pair].price*=(1+changePercent/100);cryptoData[pair].change=(Math.random()-0.5)*5;}if(document.getElementById('dashMarkets'))renderProfessionalCharts();if(document.getElementById('marketsContainer'))renderSimpleMarkets();},CONFIG.PRICE_UPDATE_INTERVAL);}

window.addEventListener('DOMContentLoaded',function(){console.log('‚úÖ CryptoPro Professional Trading Platform Loaded');generateWinnersTicker();renderSimpleMarkets();startLiveUpdates();var loggedIn=sessionStorage.getItem('loggedIn');var email=sessionStorage.getItem('currentEmail');if(loggedIn&&email){var users=JSON.parse(localStorage.getItem('cryptoProUsers')||'{}');if(users[email]){currentUser=users[email];currentUserEmail=email;robotTrades=currentUser.robotTrades||[];showLayer('dashboardLayer');checkPendingDeposits();if(currentUser.selectedBot!=='none')startBotTrading();}}});

window.addEventListener('beforeunload',function(){if(botInterval)clearInterval(botInterval);if(priceUpdateInterval)clearInterval(priceUpdateInterval);});
</script>
</body>
</html>
