<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoPro - Professional Crypto Trading Platform</title>
    <style>
        /* ===================== RESET & BASE ===================== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #1e3a5f 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ===================== ANIMATIONS ===================== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        @keyframes slideLeft {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 136, 0.3); }
            50% { box-shadow: 0 0 40px rgba(0, 255, 136, 0.6); }
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes slideInUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* ===================== LAYER SYSTEM ===================== */
        .layer {
            display: none;
            min-height: 100vh;
            animation: fadeIn 0.5s ease-out;
        }
        .layer.active { display: block; }

        /* ===================== WELCOME BONUS BANNER ===================== */
        .bonus-banner {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            animation: glow 2s infinite;
        }

        .bonus-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shine 3s infinite;
        }

        .bonus-banner h2 {
            font-size: 28px;
            color: #000;
            margin-bottom: 8px;
            font-weight: 900;
            position: relative;
            z-index: 1;
        }

        .bonus-banner p {
            font-size: 16px;
            color: rgba(0, 0, 0, 0.8);
            position: relative;
            z-index: 1;
        }

        .bonus-amount {
            font-size: 48px;
            font-weight: 900;
            color: #000;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.3);
            margin: 12px 0;
        }

        /* ===================== LIVE WINNERS TICKER ===================== */
        .winners-ticker {
            background: rgba(20, 35, 60, 0.9);
            padding: 16px 0;
            margin-bottom: 24px;
            overflow: hidden;
            border-radius: 12px;
            border: 2px solid rgba(0, 255, 136, 0.3);
        }

        .winners-ticker-title {
            text-align: center;
            color: #00ff88;
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ticker-content {
            display: flex;
            animation: slideLeft 180s linear infinite;
            white-space: nowrap;
        }

        .winner-item {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 8px 24px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 20px;
            margin-right: 16px;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .winner-item .icon {
            font-size: 20px;
        }

        .winner-item .name {
            font-weight: 600;
            color: #fff;
        }

        .winner-item .amount {
            color: #00ff88;
            font-weight: 700;
        }

        /* ===================== NAVBAR ===================== */
        .navbar {
            background: rgba(20, 35, 60, 0.95);
            backdrop-filter: blur(10px);
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(0, 217, 255, 0.2);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 700;
            color: #00d9ff;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-login {
            background: transparent;
            color: #00d9ff;
            border: 2px solid #00d9ff;
        }

        .btn-signup {
            background: linear-gradient(135deg, #00d9ff, #0099cc);
            color: #fff;
            border: none;
        }

        .btn-signup:hover, .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 217, 255, 0.4);
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .hero {
            text-align: center;
            padding: 60px 20px 40px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 24px;
            margin-bottom: 30px;
        }

        .hero h1 {
            font-size: 42px;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #00d9ff, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .cta-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-large {
            padding: 16px 32px;
            font-size: 18px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00d9ff, #0099cc);
            color: #fff;
        }

        .btn-secondary {
            background: transparent;
            color: #00d9ff;
            border: 2px solid #00d9ff;
        }

        .btn-large:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 217, 255, 0.4);
        }

        .stats-grid {
            display: flex;
            justify-content: space-around;
            background: rgba(0, 217, 255, 0.1);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
            margin: 8px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #00d9ff;
        }

        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
        }

        .card {
            background: rgba(20, 35, 60, 0.9);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 24px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .section-title {
            color: #00d9ff;
            margin-bottom: 16px;
            font-size: 20px;
        }

        /* ===================== SIMPLE CRYPTO CARDS (Welcome Page) ===================== */
        .simple-crypto-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(10, 25, 45, 0.6);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            transition: all 0.3s;
        }

        .simple-crypto-card:hover {
            background: rgba(10, 25, 45, 0.8);
            transform: translateX(5px);
        }

        .crypto-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .crypto-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
        }

        .crypto-name {
            font-weight: 600;
            font-size: 16px;
        }

        .crypto-price {
            font-size: 18px;
            font-weight: 700;
        }

        .asset-change {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
        }

        .positive {
            color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .negative {
            color: #ff006e;
            background: rgba(255, 0, 110, 0.1);
        }

        /* ===================== ENHANCED TRADINGVIEW CHARTS ===================== */
        .trading-card {
            background: rgba(10, 25, 45, 0.95);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(0, 217, 255, 0.2);
            transition: all 0.3s;
        }

        .trading-card:hover {
            border-color: #00d9ff;
            box-shadow: 0 4px 20px rgba(0, 217, 255, 0.2);
        }

        .trading-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .pair-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .price-info {
            text-align: right;
        }

        .current-price {
            font-size: 24px;
            font-weight: 900;
        }

        .price-change {
            font-size: 14px;
            margin-top: 4px;
        }

        /* Enhanced TradingView Chart Container */
        .tradingview-chart {
            position: relative;
            height: 250px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Price Scale on Right */
        .price-scale {
            position: absolute;
            right: 0;
            top: 20px;
            bottom: 40px;
            width: 60px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 10px 5px;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            text-align: right;
        }

        /* Time Scale on Bottom */
        .time-scale {
            position: absolute;
            bottom: 0;
            left: 20px;
            right: 60px;
            height: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.4);
            padding: 0 5px;
        }

        /* Grid Lines */
        .chart-grid {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 60px;
            bottom: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .grid-line {
            height: 1px;
            background: rgba(255, 255, 255, 0.05);
            width: 100%;
        }

        /* Vertical Grid Lines */
        .vertical-grid {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 60px;
            bottom: 40px;
            display: flex;
            justify-content: space-between;
        }

        .vertical-line {
            width: 1px;
            background: rgba(255, 255, 255, 0.05);
            height: 100%;
        }

        /* Candlestick Container */
        .candlesticks {
            position: absolute;
            bottom: 40px;
            left: 20px;
            right: 60px;
            top: 20px;
            display: flex;
            align-items: flex-end;
            gap: 3px;
            padding: 10px 0;
        }

        .candle {
            flex: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .candle:hover {
            opacity: 0.8;
        }

        .candle-wick {
            width: 1.5px;
            background: currentColor;
            position: relative;
        }

        .candle-body {
            width: 100%;
            border-radius: 2px;
            min-height: 4px;
            position: relative;
        }

        .candle-bullish {
            color: #00ff88;
        }

        .candle-bullish .candle-body {
            background: #00ff88;
            border: 1px solid #00cc6a;
        }

        .candle-bearish {
            color: #ff006e;
        }

        .candle-bearish .candle-body {
            background: #ff006e;
            border: 1px solid #cc0055;
        }

        /* Profit Badge */
        .profit-badge {
            position: absolute;
            top: 10px;
            right: 70px;
            background: rgba(0, 255, 136, 0.15);
            border: 1px solid rgba(0, 255, 136, 0.4);
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            color: #00ff88;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .profit-badge.negative {
            background: rgba(255, 0, 110, 0.15);
            border-color: rgba(255, 0, 110, 0.4);
            color: #ff006e;
        }

        /* Volume Bars */
        .volume-container {
            margin-top: 12px;
        }

        .volume-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .volume-bars {
            display: flex;
            align-items: flex-end;
            gap: 3px;
            height: 50px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 8px;
        }

        .volume-bar {
            flex: 1;
            border-radius: 2px 2px 0 0;
            min-height: 3px;
            transition: opacity 0.2s;
            cursor: pointer;
        }

        .volume-bar:hover {
            opacity: 0.7;
        }

        .volume-bar.bullish {
            background: rgba(0, 255, 136, 0.5);
        }

        .volume-bar.bearish {
            background: rgba(255, 0, 110, 0.5);
        }

        /* Trade Actions */
        .trade-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
        }

        .quick-trade-btn {
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-buy {
            background: linear-gradient(135deg, #00ff88, #00cc6a);
            color: #000;
        }

        .btn-sell {
            background: linear-gradient(135deg, #ff006e, #cc0055);
            color: #fff;
        }

        .quick-trade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
        }

        /* ===================== AUTH FORMS ===================== */
        .auth-container {
            max-width: 480px;
            margin: 80px auto;
            padding: 40px;
            background: rgba(20, 35, 60, 0.95);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(0, 217, 255, 0.2);
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 32px;
        }

        .auth-logo-icon {
            font-size: 60px;
            margin-bottom: 12px;
            animation: pulse 2s infinite;
        }

        .auth-logo-text {
            font-size: 32px;
            font-weight: 900;
            background: linear-gradient(135deg, #00d9ff, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .auth-title {
            text-align: center;
            margin-bottom: 24px;
            font-size: 24px;
            color: #00d9ff;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 12px;
            background: rgba(10, 25, 45, 0.6);
            color: #fff;
            font-size: 16px;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #00d9ff;
            box-shadow: 0 0 0 3px rgba(0, 217, 255, 0.1);
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .btn-submit {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #00d9ff, #0099cc);
            color: #fff;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 217, 255, 0.4);
        }

        .auth-divider {
            text-align: center;
            margin: 24px 0;
            position: relative;
        }

        .auth-divider::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 1px;
            background: rgba(255, 255, 255, 0.2);
        }

        .auth-divider span {
            background: rgba(20, 35, 60, 0.95);
            padding: 0 12px;
            position: relative;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }

        .auth-link {
            text-align: center;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .auth-link a {
            color: #00d9ff;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }

        .auth-link a:hover {
            text-decoration: underline;
        }

        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .alert.show { display: block; }

        .alert-success {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            color: #00ff88;
        }

        .alert-error {
            background: rgba(255, 0, 110, 0.1);
            border: 1px solid rgba(255, 0, 110, 0.3);
            color: #ff006e;
        }

        .alert-warning {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            color: #fbbf24;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-group label {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
        }

        /* ===================== DASHBOARD ===================== */
        .dashboard-header {
            background: rgba(20, 35, 60, 0.95);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00d9ff, #a855f7);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .account-toggle {
            display: flex;
            gap: 12px;
        }

        .toggle-btn {
            padding: 10px 20px;
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 8px;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .toggle-btn.active {
            background: linear-gradient(135deg, #00d9ff, #0099cc);
            color: #fff;
            border-color: transparent;
        }

        .balance-display {
            background: linear-gradient(135deg, #00ff88, #00d9ff);
            padding: 32px;
            border-radius: 20px;
            margin-bottom: 24px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 255, 136, 0.3);
        }

        .balance-amount {
            font-size: 48px;
            font-weight: 900;
            color: #0a1628;
            margin-bottom: 8px;
        }

        .balance-label {
            color: rgba(10, 22, 40, 0.8);
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .action-btn {
            padding: 20px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .btn-trade {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #000;
        }

        .btn-bot {
            background: linear-gradient(135deg, #a855f7, #7c3aed);
            color: #fff;
        }

        .btn-deposit {
            background: linear-gradient(135deg, #00d9ff, #0099cc);
            color: #fff;
        }

        .btn-withdraw {
            background: linear-gradient(135deg, #ff006e, #cc0055);
            color: #fff;
        }

        .btn-logout {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            padding: 10px 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-logout:hover {
            background: rgba(255, 0, 110, 0.2);
            border-color: #ff006e;
        }

        /* ===================== MODAL ===================== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1f3a 0%, #0a0e27 100%);
            border-radius: 24px;
            padding: 32px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 24px;
            color: #00ff88;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 24px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .payment-address {
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
            text-align: center;
        }

        .payment-address-text {
            font-size: 18px;
            font-weight: 700;
            color: #00ff88;
            word-break: break-all;
        }

        .warning-box {
            background: rgba(255, 0, 110, 0.1);
            border: 2px solid rgba(255, 0, 110, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
        }

        .warning-box strong {
            color: #ff006e;
            display: block;
            margin-bottom: 8px;
        }

        .bot-card {
            background: rgba(10, 25, 45, 0.6);
            border: 2px solid rgba(100, 200, 255, 0.2);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .bot-card:hover {
            background: rgba(10, 25, 45, 0.8);
            border-color: #00d9ff;
            transform: translateY(-2px);
        }

        .bot-card.selected {
            background: rgba(0, 255, 136, 0.2);
            border-color: #00ff88;
        }

        /* ===================== LIVE PANEL ===================== */
        #livePanel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            max-height: 500px;
            background: rgba(20, 35, 60, 0.98);
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 16px;
            padding: 20px;
            z-index: 998;
            overflow-y: auto;
            display: none;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
        }

        #livePanel.show {
            display: block;
            animation: slideInUp 0.5s ease-out;
        }

        .trade-item {
            background: rgba(10, 25, 45, 0.6);
            border-left: 3px solid;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s;
        }

        .trade-item:hover {
            background: rgba(10, 25, 45, 0.9);
            transform: translateX(5px);
        }

        /* ===================== RESPONSIVE ===================== */
        @media (max-width: 768px) {
            .hero h1 { font-size: 28px; }
            .cta-buttons { flex-direction: column; }
            .dashboard-header { flex-direction: column; }
            .balance-amount { font-size: 36px; }
            #livePanel { width: calc(100% - 40px); bottom: 10px; right: 10px; }
            .nav-links { gap: 10px; }
            .nav-btn { padding: 8px 16px; font-size: 12px; }
            .tradingview-chart { height: 200px; }
        }
    </style>
</head>
<body>

<!-- ===================== LAYER 1: WELCOME/HOME ===================== -->
<div id="welcomeLayer" class="layer active">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('welcomeLayer')">
            <span style="font-size: 28px;">üíé</span>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('loginLayer')">Login</button>
            <button class="nav-btn btn-signup" onclick="showLayer('signupLayer')">Sign Up</button>
        </div>
    </nav>

    <div class="container">
        <!-- Welcome Bonus Banner -->
        <div class="bonus-banner">
            <h2>üéâ WELCOME BONUS üéâ</h2>
            <div class="bonus-amount">100% MATCH</div>
            <p><strong>Get 100% bonus on your first deposit!</strong><br>Deposit $100, Get $200 to trade!</p>
        </div>

        <!-- Live Winners Ticker -->
        <div class="winners-ticker">
            <div class="winners-ticker-title">üèÜ LIVE WINNERS - REAL-TIME PROFITS üèÜ</div>
            <div class="ticker-content" id="winnersTicker">
                <!-- Populated by JS -->
            </div>
        </div>

        <div class="hero">
            <h1>Professional Crypto Trading Platform</h1>
            <p>Join 50,000+ investors earning daily profits through AI-powered trading bots. Over $125M in profits paid to our community!</p>
            <div class="cta-buttons">
                <button class="btn-large btn-primary" onclick="showLayer('signupLayer')">üöÄ Start Trading Now</button>
                <button class="btn-large btn-secondary" onclick="showLayer('loginLayer')">üîê Login to Dashboard</button>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat">
                <div class="stat-value" id="statsUsers">50,123</div>
                <div class="stat-label">Active Traders</div>
            </div>
            <div class="stat">
                <div class="stat-value">$125.7M</div>
                <div class="stat-label">Total Profits</div>
            </div>
            <div class="stat">
                <div class="stat-value">10+</div>
                <div class="stat-label">Years Trusted</div>
            </div>
            <div class="stat">
                <div class="stat-value">98.5%</div>
                <div class="stat-label">Success Rate</div>
            </div>
        </div>

        <div class="card">
            <h2 class="section-title">üìä Live Crypto Markets</h2>
            <div id="marketsContainer"></div>
        </div>
    </div>
</div>

<!-- ===================== LAYER 2: SIGN UP ===================== -->
<div id="signupLayer" class="layer">
    <div class="auth-container">
        <div class="auth-logo">
            <div class="auth-logo-icon">üíé</div>
            <div class="auth-logo-text">CryptoPro</div>
        </div>

        <h2 class="auth-title">Create Your Account</h2>

        <div id="signupAlert" class="alert"></div>

        <form id="signupForm" onsubmit="handleSignup(); return false;">
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" id="signupName" placeholder="Enter your full name" required>
            </div>

            <div class="form-group">
                <label>Email Address</label>
                <input type="email" id="signupEmail" placeholder="your@email.com" required>
            </div>

            <div class="form-group">
                <label>Phone Number</label>
                <input type="tel" id="signupPhone" placeholder="+1 234 567 8900" required>
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="password" id="signupPassword" placeholder="Create strong password" required>
            </div>

            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" id="signupConfirm" placeholder="Re-enter password" required>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="signupTerms" required>
                <label for="signupTerms">I agree to Terms & Conditions</label>
            </div>

            <button type="submit" class="btn-submit">üöÄ Create Account</button>
        </form>

        <div class="auth-divider">
            <span>Already have an account?</span>
        </div>

        <div class="auth-link">
            <a onclick="showLayer('loginLayer')">Login Here</a>
        </div>
    </div>
</div>

<!-- ===================== LAYER 3: LOGIN ===================== -->
<div id="loginLayer" class="layer">
    <div class="auth-container">
        <div class="auth-logo">
            <div class="auth-logo-icon">üíé</div>
            <div class="auth-logo-text">CryptoPro</div>
        </div>

        <h2 class="auth-title">Welcome Back</h2>

        <div id="loginAlert" class="alert"></div>

        <form id="loginForm" onsubmit="handleLogin(); return false;">
            <div class="form-group">
                <label>Email Address</label>
                <input type="email" id="loginEmail" placeholder="your@email.com" required>
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password" required>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="loginRemember">
                <label for="loginRemember">Remember me</label>
            </div>

            <button type="submit" class="btn-submit">üîê Login</button>
        </form>

        <div class="auth-divider">
            <span>Don't have an account?</span>
        </div>

        <div class="auth-link">
            <a onclick="showLayer('signupLayer')">Create Account</a>
        </div>

        <div class="auth-link" style="margin-top: 20px;">
            <a onclick="showLayer('welcomeLayer')" style="color: rgba(255,255,255,0.6);">‚Üê Back to Home</a>
        </div>
    </div>
</div>

<!-- ===================== LAYER 4: DASHBOARD ===================== -->
<div id="dashboardLayer" class="layer">
    <nav class="navbar">
        <div class="logo">
            <span style="font-size: 28px;">üíé</span>
            <span>CryptoPro</span>
        </div>
        <button class="btn-logout" onclick="handleLogout()">Logout</button>
    </nav>

    <div class="container">
        <div class="dashboard-header">
            <div class="user-info">
                <div class="user-avatar">üë§</div>
                <div>
                    <div style="font-size: 16px; font-weight: 600;" id="userName">User</div>
                    <div style="font-size: 12px; opacity: 0.7;" id="userEmail">email@example.com</div>
                </div>
            </div>

            <div class="account-toggle">
                <button class="toggle-btn" id="demoBtn" onclick="switchAccount('demo')">üéÆ DEMO</button>
                <button class="toggle-btn active" id="realBtn" onclick="switchAccount('real')">üí∞ REAL</button>
            </div>
        </div>

        <div class="balance-display">
            <div class="balance-label">TOTAL PORTFOLIO VALUE</div>
            <div class="balance-amount" id="dashBalance">$0.00</div>
        </div>

        <div class="action-grid">
            <button class="action-btn btn-trade" onclick="showModal('tradeModal')">‚ö° TRADE NOW</button>
            <button class="action-btn btn-bot" onclick="showModal('botModal')">ü§ñ TRADING BOT</button>
            <button class="action-btn btn-deposit" onclick="showModal('depositModal')">üí∞ DEPOSIT</button>
            <button class="action-btn btn-withdraw" onclick="showModal('withdrawModal')">üí∏ WITHDRAW</button>
        </div>

        <div class="card">
            <h2 class="section-title">üìä Live Trading Charts</h2>
            <div id="dashMarkets"></div>
        </div>
    </div>
</div>

<!-- ===================== MODALS ===================== -->
<!-- Deposit Modal -->
<div id="depositModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">üí∞ Deposit Funds</h2>
            <button class="close-btn" onclick="closeModal('depositModal')">√ó</button>
        </div>

        <div style="background: rgba(251, 191, 36, 0.1); border: 2px solid rgba(251, 191, 36, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px; text-align: center;">
            <div style="font-size: 24px; font-weight: 900; color: #fbbf24; margin-bottom: 8px;">üéâ 100% WELCOME BONUS!</div>
            <div style="font-size: 14px; color: rgba(255, 255, 255, 0.9);">First deposit gets 100% match! Deposit $100, get $200 to trade!</div>
        </div>

        <div class="form-group">
            <label>Amount (USD)</label>
            <input type="number" id="depositAmount" min="10" placeholder="Minimum $10">
        </div>

        <div class="form-group">
            <label>Payment Method</label>
            <select id="depositMethod">
                <option>ü™ô Cryptocurrency</option>
                <option>üì± M-Pesa</option>
                <option>üí≥ Card</option>
                <option>üè¶ Bank Transfer</option>
            </select>
        </div>

        <div class="payment-address">
            <div style="font-size: 14px; margin-bottom: 8px;">Send Payment To:</div>
            <div class="payment-address-text">CryptoPro Trading.com</div>
            <div style="font-size: 12px; margin-top: 8px; opacity: 0.7;" id="paymentID">Payment ID: CPT-XXXXX</div>
        </div>

        <div class="warning-box">
            <strong>‚ö†Ô∏è IMPORTANT - READ CAREFULLY:</strong>
            <div style="font-size: 13px; line-height: 1.6;">
                ‚Ä¢ Complete your payment FIRST before clicking "Confirm"<br>
                ‚Ä¢ Funds appear ONLY after payment verification (1-10 mins)<br>
                ‚Ä¢ Clicking without paying will NOT credit your account<br>
                ‚Ä¢ Save your transaction reference for support
            </div>
        </div>

        <div class="form-group">
            <label>Transaction Reference (Required)</label>
            <input type="text" id="depositRef" placeholder="Enter your transaction ID/hash">
        </div>

        <div class="form-group">
            <label>Upload Payment Proof (Optional)</label>
            <textarea id="depositProof" rows="3" placeholder="Paste screenshot link or describe your payment..."></textarea>
        </div>

        <button class="btn-submit" onclick="processDeposit()">‚ö° CONFIRM DEPOSIT</button>
        
        <div style="text-align: center; margin-top: 16px; font-size: 12px; opacity: 0.7;">
            Your funds will be credited after verification (usually 1-10 minutes)
        </div>
    </div>
</div>

<!-- Withdraw Modal -->
<div id="withdrawModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">üí∏ Withdraw Funds</h2>
            <button class="close-btn" onclick="closeModal('withdrawModal')">√ó</button>
        </div>

        <div class="form-group">
            <label>Amount (USD)</label>
            <input type="number" id="withdrawAmount" min="10" placeholder="Minimum $10">
        </div>

        <div class="form-group">
            <label>Withdrawal Method</label>
            <select id="withdrawMethod">
                <option>üè¶ Bank Transfer</option>
                <option>ü™ô Crypto</option>
                <option>üì± M-Pesa</option>
            </select>
        </div>

        <div class="form-group">
            <label>Account Details</label>
            <input type="text" id="withdrawAccount" placeholder="Enter account details">
        </div>

        <button class="btn-submit" onclick="processWithdraw()">üí∏ REQUEST WITHDRAWAL</button>
    </div>
</div>

<!-- Trade Modal -->
<div id="tradeModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">üìä Execute Trade</h2>
            <button class="close-btn" onclick="closeModal('tradeModal')">√ó</button>
        </div>

        <div class="form-group">
            <label>Trading Pair</label>
            <select id="tradePair">
                <option>BTC/USDT</option>
                <option>ETH/USDT</option>
                <option>SOL/USDT</option>
                <option>BNB/USDT</option>
            </select>
        </div>

        <div class="form-group">
            <label>Trade Type</label>
            <select id="tradeType">
                <option>üü¢ BUY (Long)</option>
                <option>üî¥ SELL (Short)</option>
            </select>
        </div>

        <div class="form-group">
            <label>Amount (USD)</label>
            <input type="number" id="tradeAmount" min="10" placeholder="Minimum $10">
        </div>

        <button class="btn-submit" onclick="executeTrade()">‚ö° EXECUTE TRADE</button>
    </div>
</div>

<!-- Bot Modal -->
<div id="botModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">ü§ñ AI Trading Bots</h2>
            <button class="close-btn" onclick="closeModal('botModal')">√ó</button>
        </div>

        <div id="botCards">
            <div class="bot-card" onclick="selectBot(this, 'conservative')">
                <div style="display: flex; gap: 16px; align-items: center;">
                    <div style="font-size: 36px;">üõ°Ô∏è</div>
                    <div style="flex: 1;">
                        <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">Conservative Bot</div>
                        <div style="font-size: 13px; opacity: 0.7;">65% win rate ‚Ä¢ $3-15 per trade</div>
                        <div style="font-size: 12px; color: #00ff88; margin-top: 4px;">‚úì Low Risk ‚Ä¢ Steady Growth</div>
                    </div>
                </div>
            </div>

            <div class="bot-card" onclick="selectBot(this, 'balanced')">
                <div style="display: flex; gap: 16px; align-items: center;">
                    <div style="font-size: 36px;">‚öñÔ∏è</div>
                    <div style="flex: 1;">
                        <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">Balanced Bot</div>
                        <div style="font-size: 13px; opacity: 0.7;">75% win rate ‚Ä¢ $10-35 per trade</div>
                        <div style="font-size: 12px; color: #00d9ff; margin-top: 4px;">‚úì Moderate Risk ‚Ä¢ Best Value</div>
                    </div>
                </div>
            </div>

            <div class="bot-card" onclick="selectBot(this, 'aggressive')">
                <div style="display: flex; gap: 16px; align-items: center;">
                    <div style="font-size: 36px;">üöÄ</div>
                    <div style="flex: 1;">
                        <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">Aggressive Bot</div>
                        <div style="font-size: 13px; opacity: 0.7;">85% win rate ‚Ä¢ $20-80 per trade</div>
                        <div style="font-size: 12px; color: #fbbf24; margin-top: 4px;">‚úì High Risk ‚Ä¢ Maximum Profits</div>
                    </div>
                </div>
            </div>

            <div class="bot-card" onclick="selectBot(this, 'expert')">
                <div style="display: flex; gap: 16px; align-items: center;">
                    <div style="font-size: 36px;">ü§ñ</div>
                    <div style="flex: 1;">
                        <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">Expert AI Bot</div>
                        <div style="font-size: 13px; opacity: 0.7;">90% win rate ‚Ä¢ $30-120 per trade</div>
                        <div style="font-size: 12px; color: #a855f7; margin-top: 4px;">‚úì AI-Powered ‚Ä¢ Premium Strategy</div>
                    </div>
                </div>
            </div>
        </div>

        <button class="btn-submit" onclick="activateBot()" style="margin-top: 20px;">‚úÖ ACTIVATE BOT</button>
    </div>
</div>

<!-- Live Trading Panel -->
<div id="livePanel">
    <h3 style="color: #00d9ff; font-size: 16px; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
        <span style="width: 8px; height: 8px; background: #00ff88; border-radius: 50%; animation: pulse 2s infinite;"></span>
        LIVE BOT ACTIVITY
    </h3>
    <div style="background: rgba(0,255,136,0.1); border: 1px solid rgba(0,255,136,0.3); border-radius: 12px; padding: 12px; margin-bottom: 16px;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; font-size: 12px;">
            <div>
                <div style="opacity: 0.7;">Total Trades</div>
                <div id="totalTrades" style="font-size: 18px; font-weight: 700; color: #00ff88;">0</div>
            </div>
            <div>
                <div style="opacity: 0.7;">Total Profit</div>
                <div id="totalProfit" style="font-size: 18px; font-weight: 700; color: #00ff88;">+$0.00</div>
            </div>
        </div>
    </div>
    <div id="tradesList"></div>
</div>

<script>
// ===================== CONFIGURATION =====================
const CONFIG = {
    MIN_DEPOSIT: 10,
    MIN_WITHDRAW: 10,
    MIN_WITHDRAW_TOTAL_DEPOSITS: 500,
    WELCOME_BONUS: 1.0,
    PAYMENT_VERIFICATION_TIME: 600000
};

// ===================== STATE =====================
let currentUser = null;
let currentUserEmail = '';
let activeAccount = 'real';
let selectedBotType = null;
let robotTrades = [];
let totalRobotProfits = 0;

// Crypto data with realistic prices
let cryptoData = {
    'BTC/USDT': { price: 64250, change: 0, color: '#f7931a', icon: '‚Çø' },
    'ETH/USDT': { price: 3420, change: 0, color: '#627eea', icon: 'Œû' },
    'BNB/USDT': { price: 580, change: 0, color: '#f3ba2f', icon: 'BNB' },
    'SOL/USDT': { price: 145, change: 0, color: '#14f195', icon: 'SOL' },
    'DOGE/USDT': { price: 0.08, change: 0, color: '#c2a633', icon: '√ê' },
    'XAU/USDT': { price: 2045, change: 0, color: '#ffd700', icon: 'ü•á' }
};

// Store historical data for each pair
let priceHistory = {};
Object.keys(cryptoData).forEach(pair => {
    priceHistory[pair] = [];
});

// Winner names
const winnerNames = [
    'James M.', 'Sarah K.', 'Michael R.', 'Emily T.', 'David L.', 'Jessica P.',
    'Robert H.', 'Amanda W.', 'Christopher B.', 'Jennifer S.', 'Daniel C.', 'Ashley D.',
    'Matthew F.', 'Lisa G.', 'Andrew N.', 'Michelle V.', 'Joshua X.', 'Elizabeth Y.',
    'Kevin Z.', 'Patricia Q.', 'Brian J.', 'Linda U.', 'Steven I.', 'Barbara O.',
    'Richard A.', 'Susan E.', 'Thomas W.', 'Karen M.', 'Joseph R.', 'Nancy T.',
    'Paul S.', 'Margaret H.', 'Mark L.', 'Sandra B.', 'Donald G.', 'Dorothy C.',
    'George P.', 'Betty N.', 'Kenneth D.', 'Helen V.', 'Steven F.', 'Donna M.',
    'Edward W.', 'Carol R.', 'Ronald K.', 'Ruth T.', 'Anthony J.', 'Sharon Y.',
    'Kevin H.', 'Michelle L.', 'Jason S.', 'Laura B.', 'Ryan G.', 'Kimberly C.',
    'Nicholas P.', 'Deborah N.', 'Jacob D.', 'Melissa V.', 'Eric F.', 'Stephanie M.'
];

// ===================== LAYER MANAGEMENT =====================
function showLayer(layerId) {
    document.querySelectorAll('.layer').forEach(layer => {
        layer.classList.remove('active');
    });
    document.getElementById(layerId).classList.add('active');
    
    if (layerId === 'dashboardLayer') {
        updateDashboard();
        startLiveUpdates();
    }
}

// ===================== WINNERS TICKER =====================
function generateWinnersTicker() {
    const ticker = document.getElementById('winnersTicker');
    if (!ticker) return;
    
    let html = '';
    for (let i = 0; i < 100; i++) {
        const name = winnerNames[Math.floor(Math.random() * winnerNames.length)];
        const amount = (Math.random() * 500 + 50).toFixed(2);
        const pairs = Object.keys(cryptoData);
        const pair = pairs[Math.floor(Math.random() * pairs.length)];
        
        html += `
            <div class="winner-item">
                <span class="icon">üéâ</span>
                <span class="name">${name}</span>
                <span>won</span>
                <span class="amount">+$${amount}</span>
                <span>on ${pair}</span>
            </div>
        `;
    }
    
    ticker.innerHTML = html + html;
}

// ===================== CHART GENERATION =====================
function generateCandlestickData(pair, count = 30) {
    const basePrice = cryptoData[pair].price;
    const candles = [];
    
    for (let i = 0; i < count; i++) {
        const isBullish = Math.random() > 0.45;
        const volatility = basePrice * 0.02;
        
        const bodySize = Math.random() * volatility * 0.8;
        const wickTopSize = Math.random() * volatility * 0.3;
        const wickBottomSize = Math.random() * volatility * 0.3;
        
        const open = basePrice + (Math.random() - 0.5) * volatility;
        const close = isBullish ? open + bodySize : open - bodySize;
        const high = Math.max(open, close) + wickTopSize;
        const low = Math.min(open, close) - wickBottomSize;
        
        candles.push({
            isBullish,
            open,
            high,
            low,
            close,
            volume: Math.random() * 100 + 20
        });
    }
    
    return candles;
}

// ===================== AUTH: SIGNUP =====================
function handleSignup() {
    const name = document.getElementById('signupName').value.trim();
    const email = document.getElementById('signupEmail').value.trim().toLowerCase();
    const phone = document.getElementById('signupPhone').value.trim();
    const password = document.getElementById('signupPassword').value;
    const confirm = document.getElementById('signupConfirm').value;
    const terms = document.getElementById('signupTerms').checked;
    
    if (!name || !email || !phone || !password) {
        showAlert('signupAlert', 'Please fill in all fields', 'error');
        return;
    }
    
    if (password.length < 6) {
        showAlert('signupAlert', 'Password must be at least 6 characters', 'error');
        return;
    }
    
    if (password !== confirm) {
        showAlert('signupAlert', 'Passwords do not match', 'error');
        return;
    }
    
    if (!terms) {
        showAlert('signupAlert', 'Please accept Terms & Conditions', 'error');
        return;
    }
    
    const users = JSON.parse(localStorage.getItem('cryptoProUsers') || '{}');
    
    if (users[email]) {
        showAlert('signupAlert', 'Email already registered. Please login.', 'error');
        return;
    }
    
    users[email] = {
        name: name,
        email: email,
        phone: phone,
        password: password,
        demoBalance: 10000,
        realBalance: 0,
        displayBalance: 0,
        totalDeposited: 0,
        robotTrades: [],
        totalRobotProfits: 0,
        selectedBot: 'none',
        receivedWelcomeBonus: false,
        pendingDeposits: [],
        createdAt: new Date().toISOString()
    };
    
    localStorage.setItem('cryptoProUsers', JSON.stringify(users));
    
    showAlert('signupAlert', '‚úÖ Account created! Redirecting...', 'success');
    
    setTimeout(() => {
        document.getElementById('signupForm').reset();
        showLayer('loginLayer');
    }, 2000);
}

// ===================== AUTH: LOGIN =====================
function handleLogin() {
    const email = document.getElementById('loginEmail').value.trim().toLowerCase();
    const password = document.getElementById('loginPassword').value;
    
    if (!email || !password) {
        showAlert('loginAlert', 'Please enter email and password', 'error');
        return;
    }
    
    const users = JSON.parse(localStorage.getItem('cryptoProUsers') || '{}');
    
    if (!users[email]) {
        showAlert('loginAlert', 'Account not found. Please sign up.', 'error');
        return;
    }
    
    if (users[email].password !== password) {
        showAlert('loginAlert', 'Incorrect password', 'error');
        return;
    }
    
    currentUser = users[email];
    currentUserEmail = email;
    sessionStorage.setItem('loggedIn', 'true');
    sessionStorage.setItem('currentEmail', email);
    
    showAlert('loginAlert', '‚úÖ Login successful! Redirecting...', 'success');
    
    setTimeout(() => {
        document.getElementById('loginForm').reset();
        showLayer('dashboardLayer');
        checkPendingDeposits();
    }, 1500);
}

// ===================== AUTH: LOGOUT =====================
function handleLogout() {
    if (confirm('Logout?')) {
        sessionStorage.clear();
        currentUser = null;
        currentUserEmail = '';
        document.getElementById('livePanel').classList.remove('show');
        showLayer('welcomeLayer');
    }
}

// ===================== DASHBOARD =====================
function updateDashboard() {
    if (!currentUser) return;
    
    document.getElementById('userName').textContent = currentUser.name;
    document.getElementById('userEmail').textContent = currentUser.email;
    document.getElementById('paymentID').textContent = 'Payment ID: CPT-' + currentUserEmail.split('@')[0];
    
    const balance = activeAccount === 'demo' ? currentUser.demoBalance : currentUser.displayBalance;
    document.getElementById('dashBalance').textContent = '$' + balance.toFixed(2);
    
    renderTradingCharts();
    
    if (currentUser.selectedBot !== 'none') {
        document.getElementById('livePanel').classList.add('show');
        updateLivePanel();
    }
}

function switchAccount(type) {
    activeAccount = type;
    document.getElementById('demoBtn').classList.toggle('active', type === 'demo');
    document.getElementById('realBtn').classList.toggle('active', type === 'real');
    updateDashboard();
}

// ===================== DEPOSIT =====================
function processDeposit() {
    const amount = parseFloat(document.getElementById('depositAmount').value);
    const ref = document.getElementById('depositRef').value.trim();
    const proof = document.getElementById('depositProof').value.trim();
    
    if (!amount || amount < CONFIG.MIN_DEPOSIT) {
        alert(`‚ùå Minimum deposit: $${CONFIG.MIN_DEPOSIT}`);
        return;
    }
    
    if (!ref) {
        alert('‚ùå Transaction reference is required!\n\nPlease enter your payment transaction ID/hash.');
        return;
    }
    
    if (!confirm('‚ö†Ô∏è CONFIRM PAYMENT\n\nHave you COMPLETED the payment?\n\n‚úì YES - I have paid and have the transaction reference\n‚úó NO - I will pay now\n\nClick OK only if you have paid!')) {
        alert('Please complete your payment first, then return and enter your transaction reference.');
        return;
    }
    
    const deposit = {
        id: Date.now().toString(),
        amount: amount,
        reference: ref,
        proof: proof,
        timestamp: new Date().toISOString(),
        status: 'pending'
    };
    
    if (!currentUser.pendingDeposits) {
        currentUser.pendingDeposits = [];
    }
    currentUser.pendingDeposits.push(deposit);
    
    saveUser();
    closeModal('depositModal');
    
    alert(`‚úÖ DEPOSIT SUBMITTED!\n\nAmount: $${amount.toFixed(2)}\nReference: ${ref}\n\n‚è±Ô∏è Verification Status: PENDING\n\nYour funds will appear in your account within 1-10 minutes after payment verification.\n\nYou can continue trading with your Demo account while waiting.`);
    
    setTimeout(() => {
        verifyDeposit(deposit.id);
    }, 120000);
}

function checkPendingDeposits() {
    if (!currentUser.pendingDeposits || currentUser.pendingDeposits.length === 0) return;
    
    currentUser.pendingDeposits.forEach(deposit => {
        if (deposit.status === 'pending') {
            const timePassed = Date.now() - new Date(deposit.timestamp).getTime();
            if (timePassed >= 120000) {
                verifyDeposit(deposit.id);
            }
        }
    });
}

function verifyDeposit(depositId) {
    const deposit = currentUser.pendingDeposits.find(d => d.id === depositId);
    if (!deposit || deposit.status !== 'pending') return;
    
    let bonusAmount = 0;
    if (!currentUser.receivedWelcomeBonus) {
        bonusAmount = deposit.amount * CONFIG.WELCOME_BONUS;
        currentUser.receivedWelcomeBonus = true;
    }
    
    const totalAmount = deposit.amount + bonusAmount;
    
    currentUser.displayBalance += totalAmount;
    currentUser.realBalance += totalAmount;
    currentUser.totalDeposited += deposit.amount;
    
    deposit.status = 'verified';
    
    saveUser();
    updateDashboard();
    
    if (sessionStorage.getItem('loggedIn')) {
        if (bonusAmount > 0) {
            alert(`üéâ DEPOSIT VERIFIED!\n\nDeposit: $${deposit.amount.toFixed(2)}\nüéÅ Welcome Bonus: +$${bonusAmount.toFixed(2)}\nüí∞ Total Credited: $${totalAmount.toFixed(2)}\n\n‚úÖ Your funds are now available for trading!`);
        } else {
            alert(`‚úÖ DEPOSIT VERIFIED!\n\nAmount: $${deposit.amount.toFixed(2)}\n\n‚úÖ Your funds are now available for trading!`);
        }
    }
}

// ===================== WITHDRAW =====================
function processWithdraw() {
    const amount = parseFloat(document.getElementById('withdrawAmount').value);
    const account = document.getElementById('withdrawAccount').value.trim();
    
    if (!amount || amount < CONFIG.MIN_WITHDRAW) {
        alert(`Minimum withdrawal: $${CONFIG.MIN_WITHDRAW}`);
        return;
    }
    
    const balance = activeAccount === 'demo' ? currentUser.demoBalance : currentUser.displayBalance;
    
    if (amount > balance) {
        alert(`Insufficient balance\n\nAvailable: $${balance.toFixed(2)}`);
        return;
    }
    
    if (currentUser.totalDeposited < CONFIG.MIN_WITHDRAW_TOTAL_DEPOSITS) {
        const needed = CONFIG.MIN_WITHDRAW_TOTAL_DEPOSITS - currentUser.totalDeposited;
        alert(`‚ö†Ô∏è Withdrawal Requirements Not Met\n\nYou need $${needed.toFixed(2)} more in total deposits to unlock withdrawals.\n\nCurrent deposits: $${currentUser.totalDeposited.toFixed(2)}\nRequired: $${CONFIG.MIN_WITHDRAW_TOTAL_DEPOSITS.toFixed(2)}`);
        return;
    }
    
    if (!account) {
        alert('Enter account details');
        return;
    }
    
    if (activeAccount === 'demo') {
        currentUser.demoBalance -= amount;
    } else {
        currentUser.displayBalance -= amount;
    }
    
    saveUser();
    updateDashboard();
    closeModal('withdrawModal');
    
    alert(`‚úÖ Withdrawal request of $${amount.toFixed(2)} submitted!\n\nProcessing: 1-24 hours\n\nYou'll receive a confirmation once processed.`);
}

// ===================== TRADE =====================
function executeTrade() {
    const amount = parseFloat(document.getElementById('tradeAmount').value);
    const pair = document.getElementById('tradePair').value;
    
    if (!amount || amount < 10) {
        alert('Minimum trade: $10');
        return;
    }
    
    const balance = activeAccount === 'demo' ? currentUser.demoBalance : currentUser.displayBalance;
    
    if (amount > balance) {
        alert(`Insufficient balance\n\nAvailable: $${balance.toFixed(2)}`);
        return;
    }
    
    const win = Math.random() < 0.6;
    const profit = amount * (Math.random() * 0.05) * (win ? 1 : -1);
    
    if (activeAccount === 'demo') {
        currentUser.demoBalance += profit;
    } else {
        currentUser.displayBalance += profit;
    }
    
    saveUser();
    updateDashboard();
    closeModal('tradeModal');
    
    alert(`${win ? '‚úÖ Trade Won!' : '‚ùå Trade Lost'}\n\nüìä Pair: ${pair}\nüí∞ Amount: $${amount.toFixed(2)}\nüíµ P/L: ${profit >= 0 ? '+' : ''}$${profit.toFixed(2)}\nüìÇ New Balance: $${(balance + profit).toFixed(2)}`);
}

// ===================== BOT =====================
function selectBot(element, type) {
    selectedBotType = type;
    document.querySelectorAll('.bot-card').forEach(card => {
        card.classList.remove('selected');
    });
    element.classList.add('selected');
}

function activateBot() {
    if (!selectedBotType) {
        alert('Select a bot first');
        return;
    }
    
    currentUser.selectedBot = selectedBotType;
    saveUser();
    closeModal('botModal');
    
    document.getElementById('livePanel').classList.add('show');
    
    alert(`‚úÖ ${selectedBotType.toUpperCase()} Bot activated!\n\nThe bot will start trading automatically.`);
    
    startBotTrading();
}

function startBotTrading() {
    setInterval(() => {
        if (currentUser.selectedBot === 'none' || activeAccount !== 'real') return;
        
        const bots = {
            conservative: { min: 3, max: 15, rate: 0.65 },
            balanced: { min: 10, max: 35, rate: 0.75 },
            aggressive: { min: 20, max: 80, rate: 0.85 },
            expert: { min: 30, max: 120, rate: 0.90 }
        };
        
        const bot = bots[currentUser.selectedBot];
        const win = Math.random() < bot.rate;
        const profit = win ? (bot.min + Math.random() * (bot.max - bot.min)) : -(bot.min * 0.3);
        
        currentUser.displayBalance += profit;
        currentUser.totalRobotProfits += profit;
        
        const pairs = Object.keys(cryptoData);
        const pair = pairs[Math.floor(Math.random() * pairs.length)];
        
        robotTrades.unshift({
            pair: pair,
            profit: profit,
            time: new Date().toISOString(),
            botType: currentUser.selectedBot
        });
        
        if (robotTrades.length > 20) robotTrades = robotTrades.slice(0, 20);
        
        saveUser();
        updateDashboard();
        updateLivePanel();
        
    }, 15000);
}

function updateLivePanel() {
    document.getElementById('totalTrades').textContent = robotTrades.length;
    
    const profitEl = document.getElementById('totalProfit');
    profitEl.textContent = (currentUser.totalRobotProfits >= 0 ? '+' : '') + '$' + currentUser.totalRobotProfits.toFixed(2);
    profitEl.style.color = currentUser.totalRobotProfits >= 0 ? '#00ff88' : '#ff006e';
    
    const list = document.getElementById('tradesList');
    list.innerHTML = robotTrades.slice(0, 10).map(trade => {
        const color = trade.profit > 0 ? '#00ff88' : '#ff006e';
        return `
            <div class="trade-item" style="border-left-color: ${color};">
                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                    <strong style="color: ${cryptoData[trade.pair].color};">${trade.pair}</strong>
                    <span style="color: ${color}; font-weight: 700;">${trade.profit > 0 ? '+' : ''}$${trade.profit.toFixed(2)}</span>
                </div>
                <div style="font-size: 11px; opacity: 0.7; display: flex; justify-content: space-between;">
                    <span>${trade.botType} bot</span>
                    <span>${new Date(trade.time).toLocaleTimeString()}</span>
                </div>
            </div>
        `;
    }).join('') || '<div style="text-align: center; padding: 20px; opacity: 0.5;">No trades yet</div>';
}

// ===================== MARKETS =====================
function renderSimpleMarkets() {
    const container = document.getElementById('marketsContainer');
    if (!container) return;
    
    container.innerHTML = Object.keys(cryptoData).map(pair => {
        const data = cryptoData[pair];
        const change = data.change.toFixed(2);
        
        return `
            <div class="simple-crypto-card">
                <div class="crypto-info">
                    <div class="crypto-icon" style="background: ${data.color};">
                        ${data.icon}
                    </div>
                    <div>
                        <div class="crypto-name">${pair}</div>
                    </div>
                </div>
                <div style="text-align: right;">
                    <div class="crypto-price">$${data.price.toFixed(data.price < 1 ? 4 : 2)}</div>
                    <div class="asset-change ${change > 0 ? 'positive' : 'negative'}">${change > 0 ? '+' : ''}${change}%</div>
                </div>
            </div>
        `;
    }).join('');
}

function renderTradingCharts() {
    const container = document.getElementById('dashMarkets');
    if (!container) return;
    
    container.innerHTML = Object.keys(cryptoData).map(pair => {
        const data = cryptoData[pair];
        const change = data.change.toFixed(2);
        const candles = generateCandlestickData(pair, 30);
        
        // Calculate chart dimensions
        const maxPrice = Math.max(...candles.map(c => c.high));
        const minPrice = Math.min(...candles.map(c => c.low));
        const priceRange = maxPrice - minPrice;
        
        // Generate price scale
        const pricePoints = 5;
        const priceStep = priceRange / (pricePoints - 1);
        const priceLabels = Array.from({length: pricePoints}, (_, i) => 
            (maxPrice - (i * priceStep)).toFixed(data.price < 1 ? 4 : 2)
        );
        
        // Generate time labels
        const timeLabels = ['10:44', '10:45', '10:46', '10:47'];
        
        // Generate candlesticks
        const candlesHTML = candles.map(candle => {
            const bodyHeight = ((Math.abs(candle.close - candle.open) / priceRange) * 100);
            const wickTopHeight = ((candle.high - Math.max(candle.open, candle.close)) / priceRange) * 100;
            const wickBottomHeight = ((Math.min(candle.open, candle.close) - candle.low) / priceRange) * 100;
            
            return `
                <div class="candle ${candle.isBullish ? 'candle-bullish' : 'candle-bearish'}">
                    <div class="candle-wick" style="height: ${wickTopHeight}%;"></div>
                    <div class="candle-body" style="height: ${Math.max(bodyHeight, 2)}%;"></div>
                    <div class="candle-wick" style="height: ${wickBottomHeight}%;"></div>
                </div>
            `;
        }).join('');
        
        // Generate volume bars
        const maxVolume = Math.max(...candles.map(c => c.volume));
        const volumeHTML = candles.map((candle, i) => {
            const height = (candle.volume / maxVolume) * 100;
            return `<div class="volume-bar ${candle.isBullish ? 'bullish' : 'bearish'}" style="height: ${height}%;"></div>`;
        }).join('');
        
        // Calculate profit badge
        const profitPercent = change;
        const profitAmount = data.price * (profitPercent / 100);
        
        return `
            <div class="trading-card">
                <div class="trading-header">
                    <div class="pair-info">
                        <div class="crypto-icon" style="background: ${data.color}; width: 36px; height: 36px; font-size: 18px;">
                            ${data.icon}
                        </div>
                        <div>
                            <div style="font-weight: 700; font-size: 18px;">${pair}</div>
                            <div style="font-size: 12px; opacity: 0.7;">91% ‚Üó</div>
                        </div>
                    </div>
                    <div class="price-info">
                        <div class="current-price" style="color: ${data.color};">$${data.price.toFixed(data.price < 1 ? 4 : 2)}</div>
                        <div class="price-change ${change > 0 ? 'positive' : 'negative'}">${change > 0 ? '+' : ''}${change}%</div>
                    </div>
                </div>
                
                <div class="tradingview-chart">
                    <!-- Profit Badge -->
                    <div class="profit-badge ${change < 0 ? 'negative' : ''}">
                        <span>üí∞</span>
                        <span>${change > 0 ? '+' : ''}$${Math.abs(profitAmount).toFixed(2)}</span>
                    </div>
                    
                    <!-- Horizontal Grid Lines -->
                    <div class="chart-grid">
                        ${Array(5).fill('').map(() => '<div class="grid-line"></div>').join('')}
                    </div>
                    
                    <!-- Vertical Grid Lines -->
                    <div class="vertical-grid">
                        ${Array(4).fill('').map(() => '<div class="vertical-line"></div>').join('')}
                    </div>
                    
                    <!-- Price Scale -->
                    <div class="price-scale">
                        ${priceLabels.map(label => `<div>${label}</div>`).join('')}
                    </div>
                    
                    <!-- Time Scale -->
                    <div class="time-scale">
                        ${timeLabels.map(label => `<div>${label}</div>`).join('')}
                    </div>
                    
                    <!-- Candlesticks -->
                    <div class="candlesticks">
                        ${candlesHTML}
                    </div>
                </div>
                
                <!-- Volume Bars -->
                <div class="volume-container">
                    <div class="volume-label">Volume</div>
                    <div class="volume-bars">
                        ${volumeHTML}
                    </div>
                </div>
                
                <!-- Trade Actions -->
                <div class="trade-actions">
                    <button class="quick-trade-btn btn-buy" onclick="quickTrade('${pair}', 'buy')">
                        <span>üü¢</span>
                        <span>BUY</span>
                    </button>
                    <button class="quick-trade-btn btn-sell" onclick="quickTrade('${pair}', 'sell')">
                        <span>üî¥</span>
                        <span>SELL</span>
                    </button>
                </div>
            </div>
        `;
    }).join('');
}

function quickTrade(pair, type) {
    document.getElementById('tradePair').value = pair;
    document.getElementById('tradeType').value = type === 'buy' ? 'üü¢ BUY (Long)' : 'üî¥ SELL (Short)';
    showModal('tradeModal');
}

function startLiveUpdates() {
    setInterval(() => {
        Object.keys(cryptoData).forEach(pair => {
            const change = (Math.random() - 0.5) * 20;
            cryptoData[pair].price = Math.max(cryptoData[pair].price + change, cryptoData[pair].price * 0.95);
            cryptoData[pair].change = ((Math.random() - 0.5) * 5);
        });
        renderTradingCharts();
        renderSimpleMarkets();
    }, 3000);
}

// ===================== UTILITIES =====================
function showModal(id) {
    document.getElementById(id).classList.add('active');
}

function closeModal(id) {
    document.getElementById(id).classList.remove('active');
}

function showAlert(id, message, type) {
    const alert = document.getElementById(id);
    alert.textContent = message;
    alert.className = `alert alert-${type} show`;
    
    if (type === 'error') {
        setTimeout(() => {
            alert.classList.remove('show');
        }, 5000);
    }
}

function saveUser() {
    if (!currentUserEmail || !currentUser) return;
    const users = JSON.parse(localStorage.getItem('cryptoProUsers') || '{}');
    users[currentUserEmail] = currentUser;
    localStorage.setItem('cryptoProUsers', JSON.stringify(users));
}

// ===================== INIT =====================
window.addEventListener('DOMContentLoaded', function() {
    console.log('‚úÖ CryptoPro Professional - Enhanced TradingView Charts');
    
    generateWinnersTicker();
    renderSimpleMarkets();
    startLiveUpdates();
    
    const loggedIn = sessionStorage.getItem('loggedIn');
    const email = sessionStorage.getItem('currentEmail');
    
    if (loggedIn && email) {
        const users = JSON.parse(localStorage.getItem('cryptoProUsers') || '{}');
        if (users[email]) {
            currentUser = users[email];
            currentUserEmail = email;
            robotTrades = currentUser.robotTrades || [];
            showLayer('dashboardLayer');
            checkPendingDeposits();
            if (currentUser.selectedBot !== 'none') {
                startBotTrading();
            }
        }
    }
});
</script>

</body>
</html>
